const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["ListView-Cl-pbcxP-DAFgrT7v.js","strapi-DJtumbce.js","strapi-B5podyrr.css","sortBy-4pDyAQCw.js","_baseMap-D9aerTJ7.js","_baseEach-DYX0MXfM.js","groupBy-BkEwF48Z.js","index-x8w3LH6m.js","index-BRVyLNfZ.js","_arrayIncludesWith-BNzMLSv9.js"])))=>i.map(i=>d[i]);
import{hE as Ln,gj as Za,hF as In,hG as Ga,hH as Dn,fT as tt,hI as Ka,hJ as Ya,i as Ja,r as N,ht as Xa,hK as En,hL as Qa,hl as es,hM as ts,hN as ns,gr as as,hO as ss,hD as rs,hP as os,hQ as is,hR as qn,hz as ls,hA as ds,hB as cs,hS as se,d as ye,bP as ze,j as a,B as K,hT as On,cn as us,co as ms,cp as ps,cq as fs,c9 as Pn,bE as gs,cr as hs,cs as bs,ct as ys,cu as xs,cv as Cs,cw as Ts,cx as ht,cy as vs,cz as Ms,cA as ws,cB as js,cC as Fs,cD as ks,cE as $s,a2 as Rs,cF as Ss,cG as As,cH as Ns,cI as Ls,cJ as Is,cK as Ds,cL as Es,cM as qs,cN as Os,cO as Ps,cP as _s,cQ as Us,cR as zs,cS as Bs,cT as Vs,cU as Ws,cV as Hs,cW as Zs,b1 as Gs,cX as Ks,cY as Ys,ae as _n,cZ as Gt,c_ as Js,c$ as Xs,d0 as Qs,d1 as er,d2 as tr,d3 as nr,d4 as ar,d5 as sr,d6 as rr,d7 as or,d8 as ir,d9 as lr,da as dr,db as cr,dc as ur,dd as mr,de as pr,df as fr,dg as gr,dh as hr,di as br,dj as yr,by as xr,dk as Cr,dl as Un,dm as zn,dn as Bn,dp as Tr,dq as vr,dr as Mr,ds as wr,dt as jr,du as Fr,dv as Vn,dw as Wn,dx as Hn,dy as kr,H as $r,dz as Rr,dA as Sr,dB as Ar,dC as Nr,dD as Lr,bj as Ir,aF as we,dE as Dr,bF as Er,dF as qr,dG as Or,a1 as Pr,dH as _r,dI as Ur,dJ as zr,dK as Br,dL as Zn,dM as Vr,dN as Wr,dO as Hr,dP as Zr,dQ as Gr,dR as Kr,dS as Yr,dT as Jr,dU as Xr,dV as Qr,dW as eo,dX as to,dY as no,dZ as ao,d_ as so,d$ as ro,e0 as oo,e1 as io,e2 as lo,e3 as co,e4 as uo,e5 as mo,e6 as po,ey as Je,bM as Gn,eF as _e,eS as fo,eG as go,hU as Kt,eQ as ho,eH as Ge,eR as bo,eI as yo,eJ as Yt,eK as bt,eO as Jt,eL as xo,eM as Co,hV as To,hW as vo,eN as Xt,eP as Mo,F as E,u as z,bs as Kn,P as yt,hX as wo,hY as jo,b as Fo,R as ko,a as Qt,bS as $o,bT as Ro,bU as So,bV as Ao,hZ as No,J as Ce,aE as en,bc as Lo,o as nt,aY as Io,q as at,eZ as Do,v as Eo,ek as st,h_ as qo,bO as Oo,bA as Po,aZ as _o,a4 as tn,s as Uo,fU as R,h$ as re,i0 as zo,ay as Bo,a5 as Vo,i1 as J,fC as Yn,i2 as Jn,M as je,e7 as fe,at as Nt,W as X,i3 as Xn,i4 as Wo,i5 as Qn,X as L,gA as ea,T as ne,bB as Ve,bC as We,bi as Lt,Z as ke,i6 as ta,aK as Ho,aL as Zo,c as na,N as Go,O as Ko,i7 as Yo,I as nn,aw as Jo,aJ as Xo,i8 as aa,i9 as Qe,ia as It,ak as Qo,al as ei,ib as sa,U as $e,aV as ra,ic as Xe,fV as ti,id as ni,gy as oa,ie as Dt,V as ai,g as Z,l as V,k as W,h as Be,bv as be,am as an,bk as si,ig as U,ih as ri,br as oi,L as ii,ax as li,a_ as di,ii as ci,ij as xt,ik as ui,h8 as mi,gb as pi,h7 as fi,il as gi,Y as hi,a9 as bi}from"./strapi-DJtumbce.js";import{g as yi}from"./groupBy-BkEwF48Z.js";import{f as xi}from"./index-x8w3LH6m.js";import{_ as Ci}from"./_arrayIncludesWith-BNzMLSv9.js";import{s as Ti}from"./sortBy-4pDyAQCw.js";import"./_baseEach-DYX0MXfM.js";import"./index-BRVyLNfZ.js";import"./_baseMap-D9aerTJ7.js";var vi=Ln,Mi=Za,wi=In,ji="[object String]";function Fi(e){return typeof e=="string"||!Mi(e)&&wi(e)&&vi(e)==ji}var ki=Fi,$i=Ga,Ri=$i("length"),Si=Ri,ia="\\ud800-\\udfff",Ai="\\u0300-\\u036f",Ni="\\ufe20-\\ufe2f",Li="\\u20d0-\\u20ff",Ii=Ai+Ni+Li,Di="\\ufe0e\\ufe0f",Ei="["+ia+"]",Ft="["+Ii+"]",kt="\\ud83c[\\udffb-\\udfff]",qi="(?:"+Ft+"|"+kt+")",la="[^"+ia+"]",da="(?:\\ud83c[\\udde6-\\uddff]){2}",ca="[\\ud800-\\udbff][\\udc00-\\udfff]",Oi="\\u200d",ua=qi+"?",ma="["+Di+"]?",Pi="(?:"+Oi+"(?:"+[la,da,ca].join("|")+")"+ma+ua+")*",_i=ma+ua+Pi,Ui="(?:"+[la+Ft+"?",Ft,da,ca,Ei].join("|")+")",sn=RegExp(kt+"(?="+kt+")|"+Ui+_i,"g");function zi(e){for(var t=sn.lastIndex=0;sn.test(e);)++t;return t}var Bi=zi,Vi=Si,Wi=Dn,Hi=Bi;function Zi(e){return Wi(e)?Hi(e):Vi(e)}var pa=Zi,Gi=Ka,Ki=Ya,Yi=Ja,Ji=ki,Xi=pa,Qi="[object Map]",el="[object Set]";function tl(e){if(e==null)return 0;if(Yi(e))return Ji(e)?Xi(e):e.length;var t=Ki(e);return t==Qi||t==el?e.size:Gi(e).length}var nl=tl;const al=tt(nl),rn=Symbol.for("react-redux-context"),on=typeof globalThis<"u"?globalThis:{};function sl(){var e;if(!N.createContext)return{};const t=(e=on[rn])!=null?e:on[rn]=new Map;let n=t.get(N.createContext);return n||(n=N.createContext(null),n.displayName="ReactRedux",t.set(N.createContext,n)),n}const Re=sl();function Et(e=Re){return function(){const n=N.useContext(e);if(!n)throw new Error("could not find react-redux context value; please ensure the component is wrapped in a <Provider>");return n}}const fa=Et(),rl=()=>{throw new Error("uSES not initialized!")};let ga=rl;const ol=e=>{ga=e},il=(e,t)=>e===t;function ll(e=Re){const t=e===Re?fa:Et(e);return function(r,s={}){const{equalityFn:i=il,stabilityCheck:o=void 0,noopCheck:l=void 0}=typeof s=="function"?{equalityFn:s}:s;{if(!r)throw new Error("You must pass a selector to useSelector");if(typeof r!="function")throw new Error("You must pass a function as a selector to useSelector");if(typeof i!="function")throw new Error("You must pass a function as an equality function to useSelector")}const{store:d,subscription:m,getServerState:u,stabilityCheck:p,noopCheck:x}=t(),b=N.useRef(!0),h=N.useCallback({[r.name](w){const A=r(w);{const y=typeof o>"u"?p:o;if(y==="always"||y==="once"&&b.current){const S=r(w);if(!i(A,S)){let I;try{throw new Error}catch(Y){({stack:I}=Y)}console.warn("Selector "+(r.name||"unknown")+` returned a different result when called with the same parameters. This can lead to unnecessary rerenders.
Selectors that return a new reference (such as an object or an array) should be memoized: https://redux.js.org/usage/deriving-data-selectors#optimizing-selectors-with-memoization`,{state:w,selected:A,selected2:S,stack:I})}}const g=typeof l>"u"?x:l;if((g==="always"||g==="once"&&b.current)&&A===w){let S;try{throw new Error}catch(I){({stack:S}=I)}console.warn("Selector "+(r.name||"unknown")+` returned the root state when called. This can lead to unnecessary rerenders.
Selectors that return the entire state are almost certainly a mistake, as they will cause a rerender whenever *anything* in state changes.`,{stack:S})}b.current&&(b.current=!1)}return A}}[r.name],[r,p,o]),C=ga(m.addNestedSub,d.getState,u||d.getState,h,i);return N.useDebugValue(C),C}}const ha=ll();function ln(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function dl(e,t){if(ln(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!ln(e[n[s]],t[n[s]]))return!1;return!0}function ba(e=Re){const t=e===Re?fa:Et(e);return function(){const{store:r}=t();return r}}const cl=ba();function ul(e=Re){const t=e===Re?cl:ba(e);return function(){return t().dispatch}}const rt=ul();ol(Xa.useSyncExternalStoreWithSelector);var ml=En;function pl(e){return ml(e).toLowerCase()}var fl=pl;const dn=tt(fl);var gl=Ln,hl=In,bl="[object RegExp]";function yl(e){return hl(e)&&gl(e)==bl}var xl=yl,Cl=xl,Tl=es,cn=Qa,un=cn&&cn.isRegExp,vl=un?Tl(un):Cl,Ml=vl,mn=ts,wl=ns,jl=Dn,Fl=as,kl=Ml,$l=pa,Rl=ss,Sl=rs,pn=En,Al=30,Nl="...",Ll=/\w*$/;function Il(e,t){var n=Al,r=Nl;if(Fl(t)){var s="separator"in t?t.separator:s;n="length"in t?Sl(t.length):n,r="omission"in t?mn(t.omission):r}e=pn(e);var i=e.length;if(jl(e)){var o=Rl(e);i=o.length}if(n>=i)return e;var l=n-$l(r);if(l<1)return r;var d=o?wl(o,0,l).join(""):e.slice(0,l);if(s===void 0)return d+r;if(o&&(l+=d.length-l),kl(s)){if(e.slice(l).search(s)){var m,u=d;for(s.global||(s=RegExp(s.source,pn(Ll.exec(s))+"g")),s.lastIndex=0;m=s.exec(u);)var p=m.index;d=d.slice(0,p===void 0?l:p)}}else if(e.indexOf(mn(s),l)!=l){var x=d.lastIndexOf(s);x>-1&&(d=d.slice(0,x))}return d+r}var Dl=Il;const fn=tt(Dl);var Ct=os,El=is,ql=qn,Ol=1/0,Pl=Ct&&1/ql(new Ct([,-0]))[1]==Ol?function(e){return new Ct(e)}:El,_l=Pl,Ul=ls,zl=ds,Bl=Ci,Vl=cs,Wl=_l,Hl=qn,Zl=200;function Gl(e,t,n){var r=-1,s=zl,i=e.length,o=!0,l=[],d=l;if(n)o=!1,s=Bl;else if(i>=Zl){var m=t?null:Wl(e);if(m)return Hl(m);o=!1,s=Vl,d=new Ul}else d=t?[]:l;e:for(;++r<i;){var u=e[r],p=t?t(u):u;if(u=n||u!==0?u:0,o&&p===p){for(var x=d.length;x--;)if(d[x]===p)continue e;t&&d.push(p),l.push(u)}else s(d,p,n)||(d!==l&&d.push(p),l.push(u))}return l}var Kl=Gl,Yl=Kl;function Jl(e){return e&&e.length?Yl(e):[]}var Xl=Jl;const Ql=tt(Xl),c=e=>`${se}.${e}`,ya=N.createContext(),Fe=()=>N.useContext(ya),xa=N.createContext(),Ie=()=>N.useContext(xa),ed=()=>{const{components:e,componentsGroupedByCategory:t,contentTypes:n,isInDevelopmentMode:r,sortedContentTypesList:s,modifiedData:i,initialData:o}=Fe(),{toggleNotification:l}=at(),{formatMessage:d}=z(),{trackUsage:m}=nt(),[u,p]=N.useState(""),{onOpenModalCreateSchema:x,onOpenModalEditCategory:b}=Ie(),{locale:h}=z(),{startsWith:C}=Do(h,{sensitivity:"base"}),w=Eo(h,{sensitivity:"base"}),A=!Object.keys(n).some(_=>n[_].isTemporary===!0)&&!Object.keys(e).some(_=>e[_].isTemporary===!0)&&st(i,o),y=()=>{A?(m("willCreateContentType"),x({modalType:"contentType",kind:"collectionType",actionType:"create",forTarget:"contentType"})):I()},g=()=>{A?(m("willCreateSingleType"),x({modalType:"contentType",kind:"singleType",actionType:"create",forTarget:"contentType"})):I()},S=()=>{A?(m("willCreateComponent"),x({modalType:"component",kind:null,actionType:"create",forTarget:"component"})):I()},I=()=>{l({type:"info",message:d({id:c("notification.info.creating.notSaved"),defaultMessage:"Please save your work before creating a new collection type or component"})})},Y=Object.entries(t).map(([_,de])=>({name:_,title:_,isEditable:r,onClickEdit(H,P){H.stopPropagation(),A?b(P.name):I()},links:de.map(H=>({name:H.uid,to:`/plugins/${se}/component-categories/${_}/${H.uid}`,title:H.schema.displayName})).sort((H,P)=>w.compare(H.title,P.title))})).sort((_,de)=>w.compare(_.title,de.title)),D=s.filter(_=>_.visible);return{menu:[{name:"models",title:{id:`${c("menu.section.models.name")}`,defaultMessage:"Collection Types"},customLink:r&&{id:`${c("button.model.create")}`,defaultMessage:"Create new collection type",onClick:y},links:D.filter(_=>_.kind==="collectionType")},{name:"singleTypes",title:{id:`${c("menu.section.single-types.name")}`,defaultMessage:"Single Types"},customLink:r&&{id:`${c("button.single-types.create")}`,defaultMessage:"Create new single type",onClick:g},links:D.filter(_=>_.kind==="singleType")},{name:"components",title:{id:`${c("menu.section.components.name")}`,defaultMessage:"Components"},customLink:r&&{id:`${c("button.component.create")}`,defaultMessage:"Create a new component",onClick:S},links:Y}].map(_=>{if(_.links.some(P=>Array.isArray(P.links))){let P=0;return{..._,links:_.links.map(ee=>{const G=ee.links.filter(T=>C(T.title,u));return G.length===0?null:(P+=G.length,{...ee,links:G.sort((T,j)=>w.compare(T.title,j.title))})}).filter(Boolean),linksCount:P}}const H=_.links.filter(P=>C(P.title,u)).sort((P,ee)=>w.compare(P.title,ee.title));return{..._,links:H,linksCount:H.length}}),search:{value:u,onChange:p,clear:()=>p("")}}},td=ye(Gn)`
  div {
    width: inherit;
    span:nth-child(2) {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: inherit;
    }
  }
`,nd=()=>{const{menu:e,search:t}=ed(),{formatMessage:n}=z(),r=n({id:c("plugin.name"),defaultMessage:"Content-Type Builder"});return a.jsxs($o,{"aria-label":r,children:[a.jsx(Ro,{searchable:!0,value:t.value,onClear:()=>t.clear(),onChange:s=>t.onChange(s.target.value),label:r,searchLabel:n({id:"global.search",defaultMessage:"Search"})}),a.jsx(So,{children:e.map(s=>a.jsxs(N.Fragment,{children:[a.jsx(Ao,{label:n({id:s.title.id,defaultMessage:s.title.defaultMessage}),collapsable:!0,badgeLabel:s.linksCount.toString(),children:s.links.map(i=>i.links?a.jsx(No,{label:Ce(i.title),children:i.links.map(o=>a.jsx(Gn,{tag:en,to:o.to,active:o.active,isSubSectionChild:!0,children:Ce(n({id:o.name,defaultMessage:o.title}))},o.name))},i.name):a.jsx(td,{tag:en,to:i.to,active:i.active,width:"100%",children:Ce(n({id:i.name,defaultMessage:i.title}))},i.name))}),s.customLink&&a.jsx(K,{paddingLeft:7,children:a.jsx(Lo,{onClick:s.customLink.onClick,startIcon:a.jsx(we,{width:"0.8rem",height:"0.8rem"}),marginTop:2,cursor:"pointer",children:n({id:s.customLink.id,defaultMessage:s.customLink.defaultMessage})})})]},s.name))})]})},Ca=e=>e.kind==="collectionType"&&(e.restrictRelationsTo===null||Array.isArray(e.restrictRelationsTo)&&e.restrictRelationsTo.length>0),$t=(e,t)=>e.find(({name:n})=>n===t),ad=(e,t)=>!e||!t?{}:{[e]:t[e]},sd=e=>(e?.inner||[]).reduce((t,n)=>(n.path&&(t[n.path.split("[").join(".").split("]").join("")]={id:n.message,defaultMessage:n.message,values:ad(n?.type,n?.params)}),t),{}),rd=[{label:"All",children:[{label:"images (JPEG, PNG, GIF, SVG, TIFF, ICO, DVU)",value:"images"},{label:"videos (MPEG, MP4, Quicktime, WMV, AVI, FLV)",value:"videos"},{label:"audios (MP3, WAV, OGG)",value:"audios"},{label:"files (CSV, ZIP, PDF, Excel, JSON, ...)",value:"files"}]}],od=({intlLabel:e,name:t,onChange:n,value:r=null})=>{const{formatMessage:s}=z(),i=r===null||r?.length===0?s({id:"global.none",defaultMessage:"None"}):[...r].sort().map(l=>Ce(l)).join(", "),o=e.id?s({id:e.id,defaultMessage:e.defaultMessage}):t;return a.jsxs(L.Root,{name:t,children:[a.jsx(L.Label,{children:o}),a.jsx(ea,{customizeContent:()=>i,onChange:l=>{l.length>0?n({target:{name:t,value:l,type:"allowed-types-select"}}):n({target:{name:t,value:null,type:"allowed-types-select"}})},options:rd,value:r||[]})]})},gn={biginteger:_e,blocks:fo,boolean:go,collectionType:Kt,component:ho,contentType:Kt,date:Ge,datetime:Ge,decimal:_e,dynamiczone:bo,email:yo,enum:Yt,enumeration:Yt,file:bt,files:bt,float:_e,integer:_e,json:Jt,JSON:Jt,media:bt,number:_e,password:xo,relation:Co,richtext:To,singleType:vo,string:Xt,text:Xt,time:Ge,timestamp:Ge,uid:Mo},id=ye(K)`
  svg {
    height: 100%;
    width: 100%;
  }
`,et=({type:e,customField:t=null,...n})=>{const r=ze("AttributeIcon",i=>i.customFields.get);let s=gn[e];if(t){const o=r(t)?.icon;o&&(s=o)}return gn[e]?a.jsx(id,{width:"3.2rem",shrink:0,...n,"aria-hidden":!0,children:a.jsx(K,{tag:s})}):null},Ta=ye(K)`
  width: 100%;
  height: 100%;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  text-align: left;
  &:hover {
    cursor: pointer;
    background: ${({theme:e})=>e.colors.primary100};
    border: 1px solid ${({theme:e})=>e.colors.primary200};
  }
`,ld=[],dd=()=>a.jsx(E,{grow:1,justifyContent:"flex-end",children:a.jsxs(E,{gap:1,hasRadius:!0,background:"alternative100",padding:"0.2rem 0.4rem",children:[a.jsx(ui,{width:"1rem",height:"1rem",fill:"alternative600"}),a.jsx(ne,{textColor:"alternative600",variant:"sigma",children:"New"})]})}),cd=({type:e="text"})=>{const{formatMessage:t}=z(),{onClickSelectField:n}=Ie(),r=()=>{n({attributeType:e,step:e==="component"?"1":null})};return a.jsx(Ta,{padding:4,tag:"button",hasRadius:!0,type:"button",onClick:r,children:a.jsxs(E,{children:[a.jsx(et,{type:e}),a.jsxs(K,{paddingLeft:4,width:"100%",children:[a.jsxs(E,{justifyContent:"space-between",children:[a.jsx(ne,{fontWeight:"bold",textColor:"neutral800",children:t({id:c(`attribute.${e}`),defaultMessage:e})}),ld.includes(e)&&a.jsx(dd,{})]}),a.jsx(E,{children:a.jsx(ne,{variant:"pi",textColor:"neutral600",children:t({id:c(`attribute.${e}.description`),defaultMessage:"A type for modeling data"})})})]})]})})},ud=({attributes:e})=>a.jsx(Dt,{tagName:"button",children:a.jsx(E,{direction:"column",alignItems:"stretch",gap:8,children:e.map((t,n)=>a.jsx($e.Root,{gap:3,children:t.map(r=>a.jsx($e.Item,{col:6,direction:"column",alignItems:"stretch",children:a.jsx(cd,{type:r})},r))},n))})}),md=({customFieldUid:e,customField:t})=>{const{type:n,intlLabel:r,intlDescription:s}=t,{formatMessage:i}=z(),{onClickSelectCustomField:o}=Ie(),l=()=>{o({attributeType:n,customFieldUid:e})};return a.jsx(Ta,{padding:4,tag:"button",hasRadius:!0,type:"button",onClick:l,children:a.jsxs(E,{children:[a.jsx(et,{type:n,customField:e}),a.jsxs(K,{paddingLeft:4,children:[a.jsx(E,{children:a.jsx(ne,{fontWeight:"bold",textColor:"neutral800",children:i(r)})}),a.jsx(E,{children:a.jsx(ne,{variant:"pi",textColor:"neutral600",children:i(s)})})]})]})})},pd=ye(K)`
  background: ${({theme:e})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${e.colors.neutral150} 100%)`};
  opacity: 0.33;
`,fd=()=>a.jsx(E,{wrap:"wrap",gap:4,children:[...Array(4)].map((e,t)=>a.jsx(pd,{height:"138px",width:"375px",hasRadius:!0},`empty-card-${t}`))}),gd=()=>{const{formatMessage:e}=z();return a.jsxs(K,{position:"relative",children:[a.jsx(fd,{}),a.jsx(K,{position:"absolute",top:6,width:"100%",children:a.jsxs(E,{alignItems:"center",justifyContent:"center",direction:"column",children:[a.jsx(oi,{width:"160px",height:"88px"}),a.jsx(K,{paddingTop:6,paddingBottom:4,children:a.jsxs(K,{textAlign:"center",children:[a.jsx(ne,{variant:"delta",tag:"p",textColor:"neutral600",children:e({id:c("modalForm.empty.heading"),defaultMessage:"Nothing in here yet."})}),a.jsx(K,{paddingTop:4,children:a.jsx(ne,{variant:"delta",tag:"p",textColor:"neutral600",children:e({id:c("modalForm.empty.sub-heading"),defaultMessage:"Find what you are looking for through a wide range of extensions."})})})]})}),a.jsx(ii,{tag:li,to:`/marketplace?${di.stringify({categories:["Custom fields"]})}`,variant:"secondary",startIcon:a.jsx(we,{}),children:e({id:c("modalForm.empty.button"),defaultMessage:"Add custom fields"})})]})})]})},hd=()=>{const{formatMessage:e}=z(),t=ze("CustomFieldsList",s=>s.customFields.getAll),n=Object.entries(t());if(!n.length)return a.jsx(gd,{});const r=n.sort((s,i)=>s[1].name>i[1].name?1:-1);return a.jsx(Dt,{tagName:"button",children:a.jsxs(E,{direction:"column",alignItems:"stretch",gap:3,children:[a.jsx($e.Root,{gap:3,children:r.map(([s,i])=>a.jsx($e.Item,{col:6,direction:"column",alignItems:"stretch",children:a.jsx(md,{customFieldUid:s,customField:i},s)},s))}),a.jsx(na,{href:"https://docs.strapi.io/developer-docs/latest/development/custom-fields.html",isExternal:!0,children:e({id:c("modalForm.tabs.custom.howToLink"),defaultMessage:"How to add custom fields"})})]})})},bd=({attributes:e,forTarget:t,kind:n})=>{const{formatMessage:r}=z(),s=c("modalForm.tabs.default"),i=c("modalForm.tabs.custom"),o=t.includes("component")?"component":n,l=c(`modalForm.sub-header.chooseAttribute.${o}`);return a.jsx(je.Body,{children:a.jsxs(fe.Root,{variant:"simple",defaultValue:"default",children:[a.jsxs(E,{justifyContent:"space-between",children:[a.jsx(ne,{variant:"beta",tag:"h2",children:r({id:l,defaultMessage:"Select a field"})}),a.jsxs(fe.List,{children:[a.jsx(fe.Trigger,{value:"default",children:r({id:s,defaultMessage:"Default"})}),a.jsx(fe.Trigger,{value:"custom",children:r({id:i,defaultMessage:"Custom"})})]})]}),a.jsx(Nt,{marginBottom:6}),a.jsx(fe.Content,{value:"default",children:a.jsx(ud,{attributes:e})}),a.jsx(fe.Content,{value:"custom",children:a.jsx(hd,{})})]})})},yd=({intlLabel:e,name:t,options:n,onChange:r,value:s=null})=>{const{formatMessage:i}=z(),o=e.id?i({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):t,l=d=>{let m="";d==="true"&&(m=!0),d==="false"&&(m=!1),r({target:{name:t,value:m,type:"select-default-boolean"}})};return a.jsxs(L.Root,{name:t,children:[a.jsx(L.Label,{children:o}),a.jsx(Ve,{onChange:l,value:(s===null?"":s).toString(),children:n.map(({metadatas:{intlLabel:d,disabled:m,hidden:u},key:p,value:x})=>a.jsx(We,{value:x,disabled:m,hidden:u,children:d.defaultMessage},p))})]})},xd=ye(E)`
  position: relative;
  align-items: stretch;

  label {
    border-radius: 4px;
    max-width: 50%;
    cursor: pointer;
    user-select: none;
    flex: 1;
    border-radius: 4px;
    border: 1px solid ${({theme:e})=>e.colors.neutral200};

    ${On()}
  }

  input {
    position: absolute;
    opacity: 0;
  }

  .option {
    height: 100%;
    border-radius: 4px;
    will-change: transform, opacity;
    background: ${({theme:e})=>e.colors.neutral0};

    .checkmark {
      position: relative;
      display: block;
      will-change: transform;
      background: ${({theme:e})=>e.colors.neutral0};
      width: ${({theme:e})=>e.spaces[5]};
      height: ${({theme:e})=>e.spaces[5]};
      border: solid 1px ${({theme:e})=>e.colors.neutral300};
      border-radius: 50%;

      &:before,
      &:after {
        content: '';
        display: block;
        border-radius: 50%;
        width: ${({theme:e})=>e.spaces[3]};
        height: ${({theme:e})=>e.spaces[3]};
        position: absolute;
        top: 3px;
        left: 3px;
      }

      &:after {
        transform: scale(0);
        transition: inherit;
        will-change: transform;
      }
    }
  }

  .container input:checked ~ div {
    background: ${({theme:e})=>e.colors.primary100};
    color: ${({theme:e})=>e.colors.primary600};
    .checkmark {
      border: solid 1px ${({theme:e})=>e.colors.primary600};
      &::after {
        background: ${({theme:e})=>e.colors.primary600};
        transform: scale(1);
      }
    }
  }
`,qt=({intlLabel:e,name:t,onChange:n,radios:r=[],value:s})=>{const{formatMessage:i}=z();return a.jsxs(E,{direction:"column",alignItems:"stretch",gap:2,children:[a.jsx(ne,{variant:"pi",fontWeight:"bold",textColor:"neutral800",htmlFor:t,tag:"label",children:i(e)}),a.jsx(xd,{gap:4,alignItems:"stretch",children:r.map(o=>a.jsxs("label",{htmlFor:o.value.toString(),className:"container",children:[a.jsx("input",{id:o.value.toString(),name:t,className:"option-input",checked:o.value===s,value:o.value,onChange:n,type:"radio"},o.value),a.jsx(K,{className:"option",padding:4,children:a.jsxs(E,{children:[a.jsx(K,{paddingRight:4,children:a.jsx("span",{className:"checkmark"})}),a.jsxs(E,{direction:"column",alignItems:"stretch",gap:2,children:[a.jsx(ne,{fontWeight:"bold",children:i(o.title)}),a.jsx(ne,{variant:"pi",textColor:"neutral600",children:i(o.description)})]})]})})]},o.value))})]})},Cd=({onChange:e,name:t,intlLabel:n,...r})=>{const s=i=>{const o=i.target.value!=="false";e({target:{name:t,value:o,type:"boolean-radio-group"}})};return a.jsx(qt,{...r,name:t,onChange:s,intlLabel:n})},Td=({error:e,intlLabel:t,modifiedData:n,name:r,onChange:s,value:i=null})=>{const{formatMessage:o}=z(),l=t.id?o({id:t.id,defaultMessage:t.defaultMessage},{...t.values}):r,d=n.type==="biginteger"?"text":"number",m=!n.type,u=e?o({id:e,defaultMessage:e}):"";return a.jsxs(E,{direction:"column",alignItems:"stretch",gap:2,children:[a.jsx(Lt,{id:r,name:r,onCheckedChange:p=>{s({target:{name:r,value:p?d==="text"?"0":0:null}})},checked:i!==null,children:l}),i!==null&&a.jsx(K,{paddingLeft:6,style:{maxWidth:"200px"},children:d==="text"?a.jsxs(L.Root,{error:u,name:r,children:[a.jsx(ke,{"aria-label":l,disabled:m,onChange:s,value:i===null?"":i}),a.jsx(L.Error,{})]}):a.jsxs(L.Root,{error:u,name:r,children:[a.jsx(ta,{"aria-label":l,disabled:m,onValueChange:p=>{s({target:{name:r,value:p??0,type:d}})},value:i||0}),a.jsx(L.Error,{})]})})]})},vd=({onChange:e,...t})=>{const{formatMessage:n}=z(),{toggleNotification:r}=at(),s=i=>{r({type:"info",message:n({id:c("contentType.kind.change.warning"),defaultMessage:"You just changed the kind of a content type: API will be reset (routes, controllers, and services will be overwritten)."})}),e(i)};return a.jsx(qt,{...t,onChange:s})},Md=({description:e,disabled:t=!1,intlLabel:n,isCreating:r,name:s,onChange:i,value:o=!1})=>{const{formatMessage:l}=z(),[d,m]=N.useState(!1),u=n.id?l({id:n.id,defaultMessage:n.defaultMessage},{...n.values}):s,p=e?l({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",x=()=>{i({target:{name:s,value:!1}}),m(!1)},b=h=>{if(!h&&!r){m(!0);return}i({target:{name:s,value:!!h}})};return a.jsxs(a.Fragment,{children:[a.jsxs(L.Root,{hint:p,name:s,children:[a.jsx(Lt,{checked:o,disabled:t,onCheckedChange:b,children:u}),a.jsx(L.Hint,{})]}),a.jsx(Ho.Root,{open:d,onOpenChange:h=>m(h),children:a.jsx(Zo,{endAction:a.jsx(X,{onClick:x,variant:"danger",width:"100%",justifyContent:"center",children:l({id:c("popUpWarning.draft-publish.button.confirm"),defaultMessage:"Yes, disable"})}),children:l({id:c("popUpWarning.draft-publish.message"),defaultMessage:"If you disable the draft & publish, your drafts will be deleted."})})})]})},wd=({categoryName:e,deleteCategory:t,deleteComponent:n,deleteContentType:r,isAttributeModal:s,isCustomFieldModal:i,isComponentAttribute:o,isComponentToDzModal:l,isContentTypeModal:d,isCreatingComponent:m,isCreatingComponentAttribute:u,isCreatingComponentInDz:p,isCreatingComponentWhileAddingAField:x,isCreatingContentType:b,isCreatingDz:h,isComponentModal:C,isDzAttribute:w,isEditingAttribute:A,isEditingCategory:y,isInFirstComponentStep:g,onSubmitAddComponentAttribute:S,onSubmitAddComponentToDz:I,onSubmitCreateContentType:Y,onSubmitCreateComponent:D,onSubmitCreateDz:Q,onSubmitEditAttribute:_,onSubmitEditCategory:de,onSubmitEditComponent:H,onSubmitEditContentType:P,onSubmitEditCustomFieldAttribute:ee,onSubmitEditDz:G,onClickFinish:T})=>{const{formatMessage:j}=z();return l?p?a.jsx(X,{variant:"secondary",type:"submit",onClick:v=>{v.preventDefault(),I(v,!0)},startIcon:a.jsx(we,{}),children:j({id:c("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"})}):a.jsx(X,{variant:"default",type:"submit",onClick:v=>{v.preventDefault(),I(v,!1)},children:j({id:"global.finish",defaultMessage:"Finish"})}):s&&w&&!h?a.jsx(X,{variant:"default",type:"submit",onClick:v=>{v.preventDefault(),T(),G(v,!1)},children:j({id:"global.finish",defaultMessage:"Finish"})}):s&&w&&h?a.jsx(a.Fragment,{children:a.jsx(X,{variant:"secondary",type:"submit",onClick:v=>{v.preventDefault(),Q(v,!0)},startIcon:a.jsx(we,{}),children:j({id:c("form.button.add-components-to-dynamiczone"),defaultMessage:"Add components to the zone"})})}):s&&o?g?a.jsx(X,{variant:"secondary",type:"submit",onClick:v=>{v.preventDefault(),S(v,!0)},children:j(u?{id:c("form.button.configure-component"),defaultMessage:"Configure the component"}:{id:c("form.button.select-component"),defaultMessage:"Configure the component"})}):a.jsxs(E,{gap:2,children:[a.jsx(X,{variant:"secondary",type:"submit",onClick:v=>{v.preventDefault(),S(v,!0)},startIcon:a.jsx(we,{}),children:j(x?{id:c("form.button.add-first-field-to-created-component"),defaultMessage:"Add first field to the component"}:{id:c("form.button.add-field"),defaultMessage:"Add another field"})}),a.jsx(X,{variant:"default",type:"button",onClick:v=>{v.preventDefault(),T(),S(v,!1)},children:j({id:"global.finish",defaultMessage:"Finish"})})]}):s&&!o&&!w?a.jsxs(E,{gap:2,children:[a.jsx(X,{type:A?"button":"submit",variant:"secondary",onClick:v=>{v.preventDefault(),_(v,!0)},startIcon:a.jsx(we,{}),children:j({id:c("form.button.add-field"),defaultMessage:"Add another field"})}),a.jsx(X,{type:A?"submit":"button",variant:"default",onClick:v=>{v.preventDefault(),T(),_(v,!1)},children:j({id:"global.finish",defaultMessage:"Finish"})})]}):d?a.jsxs(E,{gap:2,children:[!b&&a.jsxs(a.Fragment,{children:[a.jsx(X,{type:"button",variant:"danger",onClick:v=>{v.preventDefault(),r()},children:j({id:"global.delete",defaultMessage:"Delete"})}),a.jsx(X,{type:"submit",variant:"default",onClick:v=>{v.preventDefault(),P(v,!1)},children:j({id:"global.finish",defaultMessage:"Finish"})})]}),b&&a.jsx(X,{type:"submit",variant:"secondary",onClick:v=>{v.preventDefault(),Y(v,!0)},children:j({id:"global.continue",defaultMessage:"Continue"})})]}):C?a.jsxs(E,{gap:2,children:[!m&&a.jsxs(a.Fragment,{children:[a.jsx(X,{type:"button",variant:"danger",onClick:v=>{v.preventDefault(),n()},children:j({id:"global.delete",defaultMessage:"Delete"})}),a.jsx(X,{type:"submit",variant:"default",onClick:v=>{v.preventDefault(),H(v,!1)},children:j({id:"global.finish",defaultMessage:"Finish"})})]}),m&&a.jsx(X,{type:"submit",variant:"secondary",onClick:v=>{v.preventDefault(),D(v,!0)},children:j({id:"global.continue",defaultMessage:"Continue"})})]}):y?a.jsxs(E,{gap:2,children:[a.jsx(X,{type:"button",variant:"danger",onClick:v=>{v.preventDefault(),e&&t(e)},children:j({id:"global.delete",defaultMessage:"Delete"})}),a.jsx(X,{type:"submit",variant:"default",onClick:v=>{v.preventDefault(),de(v)},children:j({id:"global.finish",defaultMessage:"finish"})})]}):i?a.jsxs(E,{gap:2,children:[a.jsx(X,{type:A?"button":"submit",variant:"secondary",onClick:v=>{v.preventDefault(),ee(v,!0)},startIcon:a.jsx(we,{}),children:j({id:c("form.button.add-field"),defaultMessage:"Add another field"})}),a.jsx(X,{type:A?"submit":"button",variant:"default",onClick:v=>{v.preventDefault(),T(),ee(v,!1)},children:j({id:"global.finish",defaultMessage:"Finish"})})]}):null},jd=({actionType:e=null,attributeName:t,attributeType:n,categoryName:r,contentTypeKind:s,dynamicZoneTarget:i,forTarget:o,modalType:l=null,targetUid:d,customFieldUid:m=null,showBackLink:u=!1})=>{const{formatMessage:p}=z(),{modifiedData:x}=Fe(),{onOpenModalAddField:b}=Ie();let h="component",C=[];const w=x?.[o]?.[d]||x?.[o]||null,A=w?.schema.displayName;if(l==="contentType"&&(h=s),["component","editCategory"].includes(l||"")&&(h="component"),["component","contentType"].includes(l||"")){let g=c(`modalForm.component.header-${e}`);return l==="contentType"&&(g=c(`modalForm.${s}.header-create`)),e==="edit"&&(g=c("modalForm.header-edit")),a.jsx(je.Header,{children:a.jsxs(E,{children:[a.jsx(K,{children:a.jsx(et,{type:h})}),a.jsx(K,{paddingLeft:3,children:a.jsx(je.Title,{children:p({id:g},{name:A})})})]})})}return C=[{label:A,info:{category:w?.category||null,name:w?.schema.displayName}}],l==="chooseAttribute"&&(h=["component","components"].includes(o)?"component":w.schema.kind),l==="addComponentToDynamicZone"&&(h="dynamiczone",C.push({label:i})),(l==="attribute"||l==="customField")&&(h=n,C.push({label:t})),l==="editCategory"&&(C=[{label:p({id:c("modalForm.header.categories"),defaultMessage:"Categories"})},{label:r}]),a.jsx(je.Header,{children:a.jsxs(E,{gap:3,children:[u&&a.jsx(na,{"aria-label":p({id:c("modalForm.header.back"),defaultMessage:"Back"}),startIcon:a.jsx(Pn,{}),onClick:()=>b({forTarget:o,targetUid:d}),href:"#back",isExternal:!1}),a.jsx(et,{type:h,customField:m}),a.jsx(Go,{label:C.map(({label:g})=>g).join(","),children:C.map(({label:g,info:S},I,Y)=>{if(g=Ce(g),!g)return null;const D=`${g}.${I}`;return S?.category&&(g=`${g} (${Ce(S.category)} - ${Ce(S.name)})`),a.jsx(Ko,{isCurrent:I===Y.length-1,children:g},D)})})]})})},Fd=({modalType:e,forTarget:t,kind:n,actionType:r,step:s})=>{switch(e){case"chooseAttribute":return c(`modalForm.sub-header.chooseAttribute.${t?.includes("component")?"component":n||"collectionType"}`);case"attribute":return c(`modalForm.sub-header.attribute.${r}${s!=="null"&&s!==null&&r!=="edit"?".step":""}`);case"customField":return c(`modalForm.sub-header.attribute.${r}`);case"addComponentToDynamicZone":return c("modalForm.sub-header.addComponentToDynamicZone");default:return c("configurations")}},kd=({actionType:e,modalType:t,forTarget:n,kind:r,step:s,attributeType:i,attributeName:o,customField:l})=>{const{formatMessage:d}=z(),m=t==="customField"?l?.intlLabel:{id:c(`attribute.${i}`)};return a.jsxs(E,{direction:"column",alignItems:"flex-start",paddingBottom:1,gap:1,children:[a.jsx(ne,{tag:"h2",variant:"beta",children:d({id:Fd({actionType:e,forTarget:n,kind:r,step:s,modalType:t}),defaultMessage:"Add new field"},{type:m?Ce(d(m)):"",name:Ce(o),step:s})}),a.jsx(ne,{variant:"pi",textColor:"neutral600",children:d({id:c(`attribute.${i}.description`),defaultMessage:"A type for modeling data"})})]})},va={alien:us,apps:ms,archive:ps,arrowDown:fs,arrowLeft:Pn,arrowRight:gs,arrowUp:hs,attachment:bs,bell:ys,bold:xs,book:Cs,briefcase:Ts,brush:ht,bulletList:vs,calendar:Ms,car:ws,cast:js,chartBubble:Fs,chartCircle:ks,chartPie:$s,check:Rs,clock:Ss,cloud:As,code:Ns,cog:Ls,collapse:Is,command:Ds,connector:Es,crop:qs,crown:Os,cup:Ps,cursor:_s,dashboard:Us,database:zs,discuss:Bs,doctor:Vs,earth:Ws,emotionHappy:Hs,emotionUnhappy:Zs,envelop:Gs,exit:Ks,expand:Ys,eye:_n,feather:Gt,file:Js,fileError:Xs,filePdf:Qs,filter:er,folder:tr,gate:nr,gift:ar,globe:sr,grid:rr,handHeart:or,hashtag:ir,headphone:lr,heart:dr,house:cr,information:ur,italic:mr,key:pr,landscape:fr,layer:gr,layout:hr,lightbulb:br,link:yr,lock:xr,magic:Cr,manyToMany:Un,manyToOne:zn,manyWays:Bn,medium:Tr,message:vr,microphone:Mr,monitor:wr,moon:jr,music:Fr,oneToMany:Vn,oneToOne:Wn,oneWay:Hn,paint:ht,paintBrush:ht,paperPlane:kr,pencil:$r,phone:Rr,picture:Sr,pin:Ar,pinMap:Nr,plane:Lr,play:Ir,plus:we,priceTag:Dr,puzzle:Er,question:qr,quote:Or,refresh:Pr,restaurant:_r,rocket:Ur,rotate:zr,scissors:Br,search:Zn,seed:Vr,server:Wr,shield:Hr,shirt:Zr,shoppingCart:Gr,slideshow:Kr,stack:Yr,star:Jr,store:Xr,strikeThrough:Qr,sun:eo,television:to,thumbDown:no,thumbUp:ao,train:so,twitter:ro,typhoon:oo,underline:io,user:lo,volumeMute:co,volumeUp:uo,walk:mo,wheelchair:po,write:Gt},$d=ye(E)`
  label {
    ${On()}
    border-radius: ${({theme:e})=>e.borderRadius};
    border: 1px solid ${({theme:e})=>e.colors.neutral100};
  }
`,Rd=({iconKey:e,name:t,onChange:n,isSelected:r,ariaLabel:s})=>{const i=va[e];return a.jsx(L.Root,{name:t,required:!1,children:a.jsxs(L.Label,{children:[a.jsxs(ai,{children:[s,a.jsx(L.Input,{type:"radio",checked:r,onChange:n,value:e,"aria-checked":r})]}),a.jsx(E,{padding:2,cursor:"pointer",hasRadius:!0,background:r?"primary200":void 0,children:a.jsx(i,{fill:r?"primary600":"neutral300"})})]})})},Sd=({intlLabel:e,name:t,onChange:n,value:r=""})=>{const{formatMessage:s}=z(),[i,o]=N.useState(!1),[l,d]=N.useState(""),m=Object.keys(va),[u,p]=N.useState(m),x=N.useRef(null),b=N.useRef(null),h=()=>{o(!i)},C=({target:{value:y}})=>{d(y),p(()=>m.filter(g=>g.toLowerCase().includes(y.toLowerCase())))},w=()=>{h(),d(""),p(m)},A=()=>{n({target:{name:t,value:""}})};return N.useEffect(()=>{i&&b.current?.focus()},[i]),a.jsxs(a.Fragment,{children:[a.jsxs(E,{justifyContent:"space-between",paddingBottom:2,children:[a.jsx(ne,{variant:"pi",fontWeight:"bold",textColor:"neutral800",tag:"label",children:s(e)}),a.jsxs(E,{gap:1,children:[i?a.jsx(Yo,{ref:b,name:"searchbar",placeholder:s({id:c("ComponentIconPicker.search.placeholder"),defaultMessage:"Search for an icon"}),onBlur:()=>{l||h()},onChange:C,value:l,onClear:w,clearLabel:s({id:c("IconPicker.search.clear.label"),defaultMessage:"Clear the icon search"}),children:s({id:c("IconPicker.search.placeholder.label"),defaultMessage:"Search for an icon"})}):a.jsx(nn,{ref:x,onClick:h,withTooltip:!1,label:s({id:c("IconPicker.search.button.label"),defaultMessage:"Search icon button"}),variant:"ghost",children:a.jsx(Zn,{})}),r&&a.jsx(Jo,{label:s({id:c("IconPicker.remove.tooltip"),defaultMessage:"Remove the selected icon"}),children:a.jsx(nn,{onClick:A,withTooltip:!1,label:s({id:c("IconPicker.remove.button"),defaultMessage:"Remove the selected icon"}),variant:"ghost",children:a.jsx(Xo,{})})})]})]}),a.jsx($d,{position:"relative",padding:1,background:"neutral100",hasRadius:!0,wrap:"wrap",gap:2,maxHeight:"126px",overflow:"auto",textAlign:"center",children:u.length>0?u.map(y=>a.jsx(Rd,{iconKey:y,name:t,onChange:n,isSelected:y===r,ariaLabel:s({id:c("IconPicker.icon.label"),defaultMessage:"Select {icon} icon"},{icon:y})},y)):a.jsx(K,{padding:4,grow:2,children:a.jsx(ne,{variant:"delta",textColor:"neutral600",textAlign:"center",children:s({id:c("IconPicker.emptyState.label"),defaultMessage:"No icon found"})})})})]})},Ad=({description:e,error:t,intlLabel:n,modifiedData:r,name:s,onChange:i,value:o})=>{const{formatMessage:l}=z(),d=N.useRef(i),m=r?.displayName||"";N.useEffect(()=>{if(m){const b=aa(m);try{const h=Qe(b,2);d.current({target:{name:s,value:h}})}catch{d.current({target:{name:s,value:b}})}}else d.current({target:{name:s,value:""}})},[m,s]);const u=t?l({id:t,defaultMessage:t}):"",p=e?l({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",x=l(n);return a.jsxs(L.Root,{error:u,hint:p,name:s,children:[a.jsx(L.Label,{children:x}),a.jsx(ke,{onChange:i,value:o||""}),a.jsx(L.Error,{})]})},hn=e=>{if(e instanceof Date&&bn(e))return e;if(typeof e=="string"||typeof e=="number"){const t=new Date(e);if(bn(t))return t}},bn=e=>!isNaN(e.getTime()),Nd=e=>{const[t,n]=e.split(":");return`${t}:${n}`},Ld=e=>e.split(":").length===2?`${e}:00.000`:e,Id=e=>{if(e)return e.split(":").length>2?Nd(e):e},Dd=e=>{if(e)return Ld(e)},Ed=({value:e})=>Id(e),yn=(e,t,n,r)=>{const s=Dd(r);e({target:{name:t,value:s,type:n}})},qd=({autoComplete:e,customInputs:t,description:n,disabled:r,intlLabel:s,labelAction:i,error:o,name:l,onChange:d,options:m=[],placeholder:u,required:p,step:x,type:b,value:h,isNullable:C,attribute:w,...A})=>{const{formatMessage:y}=z(),g=(T,j)=>{if(T&&(j==="minLength"&&j in T||j==="maxLength"&&j in T||j==="max"&&j in T||j==="min"&&j in T))return T[j]},{hint:S}=Od({description:n,fieldSchema:{minLength:g(w,"minLength"),maxLength:g(w,"maxLength"),max:g(w,"max"),min:g(w,"min")},type:w?.type||b}),[I,Y]=N.useState(!1),D=t?t[b]:null,Q=h??void 0,_=Q??"";function de(T){if(!T)return null;if(typeof T=="string")return y({id:T,defaultMessage:T});const j={...T.values};return y({id:T.id,defaultMessage:T?.defaultMessage??T.id},j)}const H=de(o)??void 0;if(D)return a.jsx(D,{...A,attribute:w,description:n,hint:S,disabled:r,intlLabel:s,labelAction:i,error:H||"",name:l,onChange:d,options:m,required:p,placeholder:u,type:b,value:Q});const P=s.id?y({id:s.id,defaultMessage:s.defaultMessage},{...s.values}):l,ee=u?y({id:u.id,defaultMessage:u.defaultMessage},{...u.values}):"",G=()=>{switch(b){case"json":return a.jsx(bi,{value:Q,disabled:r,onChange:T=>{const j=w&&"required"in w&&!w?.required&&!T.length?null:T;d({target:{name:l,value:j}},!1)},minHeight:"25.2rem",maxHeight:"50.4rem"});case"bool":return a.jsx(hi,{checked:h===null?null:h||!1,disabled:r,offLabel:y({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"False"}),onLabel:y({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"True"}),onChange:T=>{d({target:{name:l,value:T.target.checked}})}});case"checkbox":return a.jsx(Lt,{disabled:r,onCheckedChange:T=>{d({target:{name:l,value:T}})},checked:!!Q,children:P});case"datetime":{const T=hn(Q);return a.jsx(gi,{clearLabel:y({id:"clearLabel",defaultMessage:"Clear"}),disabled:r,onChange:j=>{const v=j?j.toISOString():null;d({target:{name:l,value:v,type:b}})},onClear:()=>d({target:{name:l,value:null,type:b}}),placeholder:ee,value:T})}case"date":{const T=hn(Q);return a.jsx(fi,{clearLabel:y({id:"clearLabel",defaultMessage:"Clear"}),disabled:r,onChange:j=>{d({target:{name:l,value:j?xi(j,{representation:"date"}):null,type:b}})},onClear:()=>d({target:{name:l,value:null,type:b}}),placeholder:ee,value:T})}case"number":return a.jsx(ta,{disabled:r,onValueChange:T=>{d({target:{name:l,value:T,type:b}})},placeholder:ee,step:x,value:Q});case"email":return a.jsx(ke,{autoComplete:e,disabled:r,onChange:T=>{d({target:{name:l,value:T.target.value,type:b}})},placeholder:ee,type:"email",value:_});case"timestamp":case"text":case"string":return a.jsx(ke,{autoComplete:e,disabled:r,onChange:T=>{d({target:{name:l,value:T.target.value,type:b}})},placeholder:ee,type:"text",value:_});case"password":return a.jsx(ke,{autoComplete:e,disabled:r,endAction:a.jsx("button",{"aria-label":y({id:"Auth.form.password.show-password",defaultMessage:"Show password"}),onClick:()=>{Y(T=>!T)},style:{border:"none",padding:0,background:"transparent"},type:"button",children:I?a.jsx(_n,{fill:"neutral500"}):a.jsx(pi,{fill:"neutral500"})}),onChange:T=>{d({target:{name:l,value:T.target.value,type:b}})},placeholder:ee,type:I?"text":"password",value:_});case"select":return a.jsx(Ve,{disabled:r,onChange:T=>{d({target:{name:l,value:T,type:"select"}})},placeholder:ee,value:Q,children:m.map(({metadatas:{intlLabel:T,disabled:j,hidden:v},key:De,value:Ee})=>a.jsx(We,{value:Ee,disabled:j,hidden:v,children:y(T)},De))});case"textarea":return a.jsx(ra,{disabled:r,onChange:T=>d({target:{name:l,value:T.target.value,type:b}}),placeholder:ee,value:_});case"time":{const T=Ed({value:Q,onChange:d,name:l,type:b});return a.jsx(mi,{clearLabel:y({id:"clearLabel",defaultMessage:"Clear"}),disabled:r,onChange:j=>yn(d,l,b,j),onClear:()=>yn(d,l,b,void 0),value:T})}default:return a.jsx(ke,{disabled:!0,placeholder:"Not supported",type:"text",value:""})}};return a.jsxs(L.Root,{error:H,name:l,hint:S,required:p,children:[b!=="checkbox"?a.jsx(L.Label,{action:i,children:P}):null,G(),a.jsx(L.Error,{}),a.jsx(L.Hint,{})]})},Od=({description:e,fieldSchema:t,type:n})=>{const{formatMessage:r}=z(),s=()=>e?.id?r({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"";return{hint:(()=>{const{maximum:o,minimum:l}=_d(t),d=Pd({type:n,minimum:l,maximum:o}),m=typeof l=="number",u=typeof o=="number",p=u&&m,x=u||m;return!e?.id&&!x?"":r({id:"content-manager.form.Input.hint.text",defaultMessage:"{min, select, undefined {} other {min. {min}}}{divider}{max, select, undefined {} other {max. {max}}}{unit}{br}{description}"},{min:l,max:o,description:s(),unit:d?.message&&x?r(d.message,d.values):null,divider:p?r({id:"content-manager.form.Input.hint.minMaxDivider",defaultMessage:" / "}):null,br:x?a.jsx("br",{}):null})})()}},Pd=({type:e,minimum:t,maximum:n})=>{if(e&&["biginteger","integer","number"].includes(e))return{};const r=Math.max(t||0,n||0);return{message:{id:"content-manager.form.Input.hint.character.unit",defaultMessage:"{maxValue, plural, one { character} other { characters}}"},values:{maxValue:r}}},_d=e=>{if(!e)return{maximum:void 0,minimum:void 0};const{minLength:t,maxLength:n,max:r,min:s}=e;let i,o;const l=Number(s),d=Number(t);Number.isNaN(l)?Number.isNaN(d)||(i=d):i=l;const m=Number(r),u=Number(n);return Number.isNaN(m)?Number.isNaN(u)||(o=u):o=m,{maximum:o,minimum:i}},Ma=N.memo(qd,st),Ud=({oneThatIsCreatingARelationWithAnother:e,target:t})=>{const{contentTypes:n,sortedContentTypesList:r}=Fe(),s=rt(),i=r.filter(Ca),{plugin:o=null,schema:{displayName:l}={displayName:"error"}}=n?.[t]??{},d=({uid:m,plugin:u,title:p,restrictRelationsTo:x})=>()=>{const b=u?`${u}_${p}`:p;s(J.onChangeRelationTarget({target:{value:m,oneThatIsCreatingARelationWithAnother:e,selectedContentTypeFriendlyName:b,targetContentTypeAllowedRelations:x}}))};return a.jsxs(Je.Root,{children:[a.jsx(zd,{children:`${l} ${o?`(from: ${o})`:""}`}),a.jsx(Je.Content,{zIndex:"popover",children:i.map(({uid:m,title:u,restrictRelationsTo:p,plugin:x})=>a.jsxs(Je.Item,{onSelect:d({uid:m,plugin:x,title:u,restrictRelationsTo:p}),children:[u," ",x&&a.jsxs(a.Fragment,{children:["(from: ",x,")"]})]},m))})]})},zd=ye(Je.Trigger)`
  max-width: 16.8rem;
  span {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
`,xn=({disabled:e=!1,error:t,header:n,isMain:r=!1,name:s,onChange:i,oneThatIsCreatingARelationWithAnother:o="",target:l="",value:d=""})=>a.jsxs(K,{background:"neutral100",hasRadius:!0,borderColor:"neutral200",children:[a.jsx(E,{paddingTop:r?4:1,paddingBottom:r?3:1,justifyContent:"center",children:r?a.jsx(ne,{variant:"pi",fontWeight:"bold",textColor:"neutral800",children:n}):a.jsx(Ud,{target:l,oneThatIsCreatingARelationWithAnother:o})}),a.jsx(Nt,{background:"neutral200"}),a.jsx(K,{padding:4,children:a.jsx(Ma,{disabled:e,error:t?.id||null,intlLabel:{id:c("form.attribute.item.defineRelation.fieldName"),defaultMessage:"Field name"},name:s,onChange:i,type:"text",value:d})})]}),Bd=ye(K)`
  position: relative;
  width: 100%;
  &::before {
    content: '';
    position: absolute;
    top: calc(50% - 0px);
    height: 2px;
    width: 100%;
    background-color: ${({theme:e})=>e.colors.primary600};
    z-index: 0;
  }
`,Vd=ye(K)`
  background: ${({theme:e,$isSelected:t})=>e.colors[t?"primary100":"neutral0"]};
  border: 1px solid
    ${({theme:e,$isSelected:t})=>e.colors[t?"primary700":"neutral200"]};
  border-radius: ${({theme:e})=>e.borderRadius};
  z-index: 1;
  flex: 0 0 2.4rem;
  svg {
    width: 2.4rem;
    height: 2.4rem;
    max-width: unset;
    path {
      fill: ${({theme:e,$isSelected:t})=>e.colors[t?"primary700":"neutral500"]};
    }
  }
  cursor: pointer;
  &:disabled {
    cursor: not-allowed;
  }
`,Wd=ye(E)`
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
`,Hd={oneWay:Hn,oneToOne:Wn,oneToMany:Vn,manyToOne:zn,manyToMany:Un,manyWay:Bn},Zd=({naturePickerType:e,oneThatIsCreatingARelationWithAnother:t,relationType:n,target:r})=>{const s=rt(),{formatMessage:i}=z(),{contentTypes:o,modifiedData:l}=Fe(),d=["oneWay","oneToOne","oneToMany","manyToOne","manyToMany","manyWay"],m=["oneWay","manyWay"],p=(e==="contentType"?R(l,[e,"schema","kind"],""):e)==="collectionType"?d:m,x=n==="manyToOne",b=R(o,[r,"schema","displayName"],"unknown"),h=x?b:t,C=x?t:b,w=Qe(h,n==="manyToMany"?2:1),A=R(o,[r,"schema","restrictRelationsTo"],null),y=Qe(C,["manyToMany","oneToMany","manyToOne","manyWay"].includes(n)?2:1);return n?a.jsxs(E,{style:{flex:1},children:[a.jsx(Bd,{children:a.jsx(E,{paddingLeft:9,paddingRight:9,paddingTop:1,justifyContent:"center",children:a.jsx(Dt,{tagName:"button",children:a.jsx(E,{gap:3,children:p.map(g=>{const S=Hd[g],I=A===null||A.includes(g);return a.jsx(Vd,{tag:"button",$isSelected:n===g,disabled:!I,onClick:()=>{I&&s(J.onChangeRelationType({target:{oneThatIsCreatingARelationWithAnother:t,value:g}}))},padding:2,type:"button","aria-label":i({id:c(`relation.${g}`)}),"aria-pressed":n===g,"data-relation-type":g,children:a.jsx(S,{"aria-hidden":"true"},g)},g)})})})})}),a.jsxs(Wd,{justifyContent:"center",children:[a.jsxs(ne,{children:[fn(w,{length:24})," "]}),a.jsxs(ne,{textColor:"primary600",children:[i({id:c(`relation.${n}`)})," "]}),a.jsx(ne,{children:fn(y,{length:24})})]})]}):null},Gd=({formErrors:e,mainBoxHeader:t,modifiedData:n,naturePickerType:r,onChange:s})=>{const i=It(n.relation,n.targetAttribute);return a.jsxs(E,{style:{position:"relative"},children:[a.jsx(xn,{isMain:!0,header:t,error:e?.name||null,name:"name",onChange:s,value:n?.name||""}),a.jsx(Zd,{naturePickerType:r,oneThatIsCreatingARelationWithAnother:t,relationType:i,target:n.target}),a.jsx(xn,{disabled:["oneWay","manyWay"].includes(i),error:e?.targetAttribute||null,name:"targetAttribute",onChange:s,oneThatIsCreatingARelationWithAnother:t,target:n.target,value:n?.targetAttribute||""})]})},Kd=({error:e=null,intlLabel:t,name:n,onChange:r,value:s=void 0,isCreating:i,dynamicZoneTarget:o})=>{const{formatMessage:l}=z(),{allComponentsCategories:d}=Fe(),[m,u]=N.useState(d),p=e?l({id:e,defaultMessage:e}):"",x=l(t),b=C=>{r({target:{name:n,value:C,type:"select-category"}})},h=C=>{u(w=>[...w,C]),b(C)};return a.jsxs(L.Root,{error:p,name:n,children:[a.jsx(L.Label,{children:x}),a.jsx(Qo,{disabled:!i&&!o,onChange:b,onCreateOption:h,value:s,creatable:!0,children:m.map(C=>a.jsx(ei,{value:C,children:C},C))}),a.jsx(L.Error,{})]})},Rt=(e,t)=>t.find(n=>n.component===e),wa=(e,t,n=0)=>{const r=Rt(e,t);if(!r||!r.childComponents||r.childComponents.length===0)return n;let s=n;return r.childComponents.forEach(i=>{const o=wa(i.component,t,n+1);o>s&&(s=o)}),s},ja=(e,t)=>{const n=(i,o)=>{const l=[];if(l.push(o),!i.uidsOfAllParents)return l;for(const d of i.uidsOfAllParents){const m=Rt(d,t);m&&l.push(...n(m,o+1))}return l},r=Rt(e,t);return r?Math.max(...n(r,1)):0},Yd=({error:e=null,intlLabel:t,isAddingAComponentToAnotherComponent:n,isCreating:r,isCreatingComponentWhileAddingAField:s,componentToCreate:i,name:o,onChange:l,targetUid:d,forTarget:m,value:u})=>{const{formatMessage:p}=z(),x=e?p({id:e,defaultMessage:e}):"",b=p(t),{componentsGroupedByCategory:h,componentsThatHaveOtherComponentInTheirAttributes:C,nestedComponents:w}=Fe(),A=["component","components"].includes(m);let y=Object.entries(h).reduce((g,S)=>{const[I,Y]=S,D=Y.map(Q=>({uid:Q.uid,label:Q.schema.displayName,categoryName:I}));return[...g,...D]},[]);return n&&(y=y.filter(({uid:g})=>{const S=wa(g,C),I=ja(d,w);return S+I<=sa})),A&&(y=y.filter(g=>g.uid!==d)),s&&(y=[{uid:u,label:i?.displayName,categoryName:i?.category}]),a.jsxs(L.Root,{error:x,name:o,children:[a.jsx(L.Label,{children:b}),a.jsx(Ve,{disabled:s||!r,onChange:g=>{l({target:{name:o,value:g,type:"select-category"}})},value:u||"",children:y.map(g=>a.jsx(We,{value:g.uid,children:`${g.categoryName} - ${g.label}`},g.uid))}),a.jsx(L.Error,{})]})},Jd=({dynamicZoneTarget:e,intlLabel:t,name:n,onChange:r,value:s})=>{const{formatMessage:i}=z(),{componentsGroupedByCategory:o,modifiedData:l}=Fe(),m=$t(l.contentType.schema.attributes,e)?.components||[],u=Object.keys(o).reduce((b,h)=>{const C=o[h].filter(({uid:w})=>!m.includes(w));return C.length>0&&(b[h]=C),b},{}),p=Object.entries(u).reduce((b,h)=>{const[C,w]=h,A={label:C,children:w.map(({uid:y,schema:{displayName:g}})=>({label:g,value:y}))};return b.push(A),b},[]),x=i({id:c("components.SelectComponents.displayed-value"),defaultMessage:"{number, plural, =0 {# components} one {# component} other {# components}} selected"},{number:s?.length??0});return a.jsxs(L.Root,{name:n,children:[a.jsx(L.Label,{children:i(t)}),a.jsx(ea,{id:"select1",customizeContent:()=>x,onChange:b=>{r({target:{name:n,value:b,type:"select-components"}})},options:p,value:s||[]})]})},Xd=({intlLabel:e,error:t=void 0,modifiedData:n,name:r,onChange:s,options:i,value:o=""})=>{const{formatMessage:l}=z(),d=l(e),m=t?l({id:t,defaultMessage:t}):"",u=p=>{s({target:{name:r,value:p,type:"select"}}),o&&n.default!==void 0&&n.default!==null&&s({target:{name:"default",value:null}})};return a.jsxs(L.Root,{error:m,name:r,children:[a.jsx(L.Label,{children:d}),a.jsx(Ve,{onChange:u,value:o||"",children:i.map(({metadatas:{intlLabel:p,disabled:x,hidden:b},key:h,value:C})=>a.jsx(We,{value:C,disabled:x,hidden:b,children:l({id:p.id,defaultMessage:p.defaultMessage},p.values)},h))}),a.jsx(L.Error,{})]})},Fa=({intlLabel:e,error:t=void 0,modifiedData:n,name:r,onChange:s,options:i,value:o=""})=>{const{formatMessage:l}=z(),d=l(e),m=t?l({id:t,defaultMessage:t}):"",u=p=>{s({target:{name:r,value:p,type:"select"}}),o&&(p==="biginteger"&&o!=="biginteger"&&(n.default!==void 0&&n.default!==null&&s({target:{name:"default",value:null}}),n.max!==void 0&&n.max!==null&&s({target:{name:"max",value:null}}),n.min!==void 0&&n.min!==null&&s({target:{name:"min",value:null}})),typeof p=="string"&&["decimal","float","integer"].includes(p)&&o==="biginteger"&&(n.default!==void 0&&n.default!==null&&s({target:{name:"default",value:null}}),n.max!==void 0&&n.max!==null&&s({target:{name:"max",value:null}}),n.min!==void 0&&n.min!==null&&s({target:{name:"min",value:null}})))};return a.jsxs(L.Root,{error:m,name:r,children:[a.jsx(L.Label,{children:d}),a.jsx(Ve,{onChange:u,value:o||"",children:i.map(({metadatas:{intlLabel:p,disabled:x,hidden:b},key:h,value:C})=>a.jsx(We,{value:C,disabled:x,hidden:b,children:l(p)},h))}),a.jsx(L.Error,{})]})};Fa.defaultProps={error:void 0,value:""};const Qd=({description:e=null,error:t=null,intlLabel:n,modifiedData:r,name:s,onChange:i,value:o=null})=>{const{formatMessage:l}=z(),d=N.useRef(i),m=r?.displayName||"";N.useEffect(()=>{m?d.current({target:{name:s,value:aa(m)}}):d.current({target:{name:s,value:""}})},[m,s]);const u=t?l({id:t,defaultMessage:t}):"",p=e?l({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",x=l(n);return a.jsxs(L.Root,{error:u,hint:p,name:s,children:[a.jsx(L.Label,{children:x}),a.jsx(ke,{onChange:i,value:o||""}),a.jsx(L.Error,{}),a.jsx(L.Hint,{})]})},Cn=({form:e,formErrors:t,genericInputProps:n,modifiedData:r,onChange:s})=>{const{formatMessage:i}=z();return a.jsx(a.Fragment,{children:e.map((o,l)=>o.items.length===0?null:a.jsxs(K,{children:[o.sectionTitle&&a.jsx(K,{paddingBottom:4,children:a.jsx(ne,{variant:"delta",tag:"h3",children:i(o.sectionTitle)})}),a.jsx($e.Root,{gap:4,children:o.items.map((d,m)=>{const u=`${l}.${m}`,p=R(r,d.name,void 0),x=Object.keys(t).find(h=>h===d.name),b=x?t[x].id:R(t,[...d.name.split(".").filter(h=>h!=="componentToCreate"),"id"],null);return d.type==="pushRight"?a.jsx($e.Item,{col:d.size||6,direction:"column",alignItems:"stretch",children:a.jsx("div",{})},d.name||u):a.jsx($e.Item,{col:d.size||6,direction:"column",alignItems:"stretch",children:a.jsx(Ma,{...d,...n,error:b,onChange:s,value:p})},d.name||u)})})]},l))})},ec=({description:e=null,disabled:t=!1,error:n="",intlLabel:r,labelAction:s,name:i,onChange:o,placeholder:l=null,value:d=""})=>{const{formatMessage:m}=z(),u=n?m({id:n,defaultMessage:n}):"",p=e?m({id:e.id,defaultMessage:e.defaultMessage},{...e.values}):"",x=m(r),b=l?m({id:l.id,defaultMessage:l.defaultMessage},{...l.values}):"",h=Array.isArray(d)?d.join(`
`):"",C=w=>{const A=w.target.value.split(`
`);o({target:{name:i,value:A}})};return a.jsxs(L.Root,{error:u,hint:p,name:i,children:[a.jsx(L.Label,{action:s,children:x}),a.jsx(ra,{disabled:t,onChange:C,placeholder:b,value:h}),a.jsx(L.Error,{}),a.jsx(L.Hint,{})]})},xe={name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:c("modalForm.attribute.form.base.name.description"),defaultMessage:"No space is allowed for the name of the attribute"}},tc={sections:[{sectionTitle:null,items:[xe]}]},Le={base(e=""){return[{sectionTitle:null,items:[{name:`${e}displayName`,type:"text",intlLabel:{id:c("contentType.displayName.label"),defaultMessage:"Display Name"}},{name:`${e}category`,type:"select-category",intlLabel:{id:c("modalForm.components.create-component.category.label"),defaultMessage:"Select a category or enter a name to create a new one"}}]},{sectionTitle:null,items:[{name:`${e}icon`,type:"icon-picker",size:12,intlLabel:{id:c("modalForm.components.icon.label"),defaultMessage:"Icon"}}]}]},advanced(){return[]}},k={default:{name:"default",type:"text",intlLabel:{id:c("form.attribute.settings.default"),defaultMessage:"Default value"}},max:{name:"max",type:"checkbox-with-number-field",intlLabel:{id:c("form.attribute.item.maximum"),defaultMessage:"Maximum value"}},maxLength:{name:"maxLength",type:"checkbox-with-number-field",intlLabel:{id:c("form.attribute.item.maximumLength"),defaultMessage:"Maximum length"}},min:{name:"min",type:"checkbox-with-number-field",intlLabel:{id:c("form.attribute.item.minimum"),defaultMessage:"Minimum value"}},minLength:{name:"minLength",type:"checkbox-with-number-field",intlLabel:{id:c("form.attribute.item.minimumLength"),defaultMessage:"Minimum length"}},private:{name:"private",type:"checkbox",intlLabel:{id:c("form.attribute.item.privateField"),defaultMessage:"Private field"},description:{id:c("form.attribute.item.privateField.description"),defaultMessage:"This field will not show up in the API response"}},regex:{intlLabel:{id:c("form.attribute.item.text.regex"),defaultMessage:"RegExp pattern"},name:"regex",type:"text",description:{id:c("form.attribute.item.text.regex.description"),defaultMessage:"The text of the regular expression"}},required:{name:"required",type:"checkbox",intlLabel:{id:c("form.attribute.item.requiredField"),defaultMessage:"Required field"},description:{id:c("form.attribute.item.requiredField.description"),defaultMessage:"You won't be able to create an entry if this field is empty"}},unique:{name:"unique",type:"checkbox",intlLabel:{id:c("form.attribute.item.uniqueField"),defaultMessage:"Unique field"},description:{id:c("form.attribute.item.uniqueField.description"),defaultMessage:"You won't be able to create an entry if there is an existing entry with identical content"}}},nc={blocks(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.private]}]}},boolean(){return{sections:[{sectionTitle:null,items:[{autoFocus:!0,type:"select-default-boolean",intlLabel:{id:c("form.attribute.settings.default"),defaultMessage:"Default value"},name:"default",options:[{value:"true",key:"true",metadatas:{intlLabel:{id:"true",defaultMessage:"true"}}},{value:"",key:"null",metadatas:{intlLabel:{id:"null",defaultMessage:"null"}}},{value:"false",key:"false",metadatas:{intlLabel:{id:"false",defaultMessage:"false"}}}]}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.private]}]}},component({repeatable:e},t){return t==="1"?{sections:Le.advanced()}:e?{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.private,k.max,k.min]}]}:{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.private]}]}},date({type:e}){return{sections:[{sectionTitle:null,items:[{...k.default,type:e||"date",value:null,withDefaultValue:!1,disabled:!e,autoFocus:!1}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.unique,k.private]}]}},dynamiczone(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.max,k.min]}]}},email(){return{sections:[{sectionTitle:null,items:[{...k.default,type:"email"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.unique,k.maxLength,k.minLength,k.private]}]}},enumeration(e){return{sections:[{sectionTitle:null,items:[{name:"default",type:"select",intlLabel:{id:c("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{},options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"}}},...(e.enum||[]).filter((t,n)=>e.enum.indexOf(t)===n&&t).map(t=>({key:t,value:t,metadatas:{intlLabel:{id:`${t}.no-override`,defaultMessage:t}}}))]},{intlLabel:{id:c("form.attribute.item.enumeration.graphql"),defaultMessage:"Name override for GraphQL"},name:"enumName",type:"text",validations:{},description:{id:c("form.attribute.item.enumeration.graphql.description"),defaultMessage:"Allows you to override the default generated name for GraphQL"}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.private]}]}},json(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.private]}]}},media(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:c("form.attribute.media.allowed-types"),defaultMessage:"Select allowed types of media"},name:"allowedTypes",type:"allowed-types-select",size:7,value:"",validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.private]}]}},number(e){const t=e.type==="decimal"||e.type==="float"?"any":1;return{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"default",type:e.type==="biginteger"?"text":"number",step:t,intlLabel:{id:c("form.attribute.settings.default"),defaultMessage:"Default value"},validations:{}}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.unique,k.max,k.min,k.private]}]}},password(){return{sections:[{sectionTitle:null,items:[k.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.maxLength,k.minLength,k.private]}]}},relation(){return{sections:[{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.private]}]}},richtext(){return{sections:[{sectionTitle:null,items:[k.default]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.maxLength,k.minLength,k.private]}]}},text(){return{sections:[{sectionTitle:null,items:[k.default,k.regex]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.unique,k.maxLength,k.minLength,k.private]}]}},uid(e){return{sections:[{sectionTitle:null,items:[{...k.default,disabled:!!e.targetField,type:"text"}]},{sectionTitle:{id:"global.settings",defaultMessage:"Settings"},items:[k.required,k.maxLength,k.minLength,k.private]}]}}},St={intlLabel:{id:"global.type",defaultMessage:"Type"},name:"createComponent",type:"boolean-radio-group",size:12,radios:[{title:{id:c("form.attribute.component.option.create"),defaultMessage:"Create a new component"},description:{id:c("form.attribute.component.option.create.description"),defaultMessage:"A component is shared across types and components, it will be available and accessible everywhere."},value:!0},{title:{id:c("form.attribute.component.option.reuse-existing"),defaultMessage:"Use an existing component"},description:{id:c("form.attribute.component.option.reuse-existing.description"),defaultMessage:"Reuse a component already created to keep your data consistent across content-types."},value:!1}]},ac={component(e,t){if(t==="1"){const n=e.createComponent===!0?Le.base("componentToCreate."):[];return{sections:[{sectionTitle:null,items:[St]},...n]}}return{sections:[{sectionTitle:null,items:[xe,{name:"component",type:"select-component",intlLabel:{id:c("modalForm.attributes.select-component"),defaultMessage:"Select a component"},isMultiple:!1}]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"repeatable",type:"boolean-radio-group",size:12,radios:[{title:{id:c("form.attribute.component.option.repeatable"),defaultMessage:"Repeatable component"},description:{id:c("form.attribute.component.option.repeatable.description"),defaultMessage:"Best for multiple instances (array) of ingredients, meta tags, etc.."},value:!0},{title:{id:c("form.attribute.component.option.single"),defaultMessage:"Single component"},description:{id:c("form.attribute.component.option.single.description"),defaultMessage:"Best for grouping fields like full address, main information, etc..."},value:!1}]}]}]}},date(){return{sections:[{sectionTitle:null,items:[xe,{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",type:"select-date",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"date",value:"date",metadatas:{intlLabel:{id:c("form.attribute.item.date.type.date"),defaultMessage:"date (ex: 01/01/{currentYear})",values:{currentYear:new Date().getFullYear()}}}},{key:"datetime",value:"datetime",metadatas:{intlLabel:{id:c("form.attribute.item.date.type.datetime"),defaultMessage:"datetime (ex: 01/01/{currentYear} 00:00 AM)",values:{currentYear:new Date().getFullYear()}}}},{key:"time",value:"time",metadatas:{intlLabel:{id:c("form.attribute.item.date.type.time"),defaultMessage:"time (ex: 00:00 AM)"}}}]}]}]}},enumeration(){return{sections:[{sectionTitle:null,items:[xe]},{sectionTitle:null,items:[{name:"enum",type:"textarea-enum",size:6,intlLabel:{id:c("form.attribute.item.enumeration.rules"),defaultMessage:"Values (one line per value)"},placeholder:{id:c("form.attribute.item.enumeration.placeholder"),defaultMessage:`Ex:
morning
noon
evening`},validations:{required:!0}}]}]}},media(){return{sections:[{sectionTitle:null,items:[xe]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"multiple",size:12,type:"boolean-radio-group",radios:[{title:{id:c("form.attribute.media.option.multiple"),defaultMessage:"Multiple media"},description:{id:c("form.attribute.media.option.multiple.description"),defaultMessage:"Best for sliders, carousels or multiple files download"},value:!0},{title:{id:c("form.attribute.media.option.single"),defaultMessage:"Single media"},description:{id:c("form.attribute.media.option.single.description"),defaultMessage:"Best for avatar, profile picture or cover"},value:!1}]}]}]}},number(){return{sections:[{sectionTitle:null,items:[xe,{intlLabel:{id:c("form.attribute.item.number.type"),defaultMessage:"Number format"},name:"type",type:"select-number",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},hidden:!0}},{key:"integer",value:"integer",metadatas:{intlLabel:{id:c("form.attribute.item.number.type.integer"),defaultMessage:"integer (ex: 10)"}}},{key:"biginteger",value:"biginteger",metadatas:{intlLabel:{id:c("form.attribute.item.number.type.biginteger"),defaultMessage:"biginteger (ex: 123456789)"}}},{key:"decimal",value:"decimal",metadatas:{intlLabel:{id:c("form.attribute.item.number.type.decimal"),defaultMessage:"decimal (ex: 2.22)"}}},{key:"float",value:"float",metadatas:{intlLabel:{id:c("form.attribute.item.number.type.float"),defaultMessage:"decimal (ex: 3.3333333)"}}}]}]}]}},relation(){return{sections:[{sectionTitle:null,items:[{intlLabel:{id:"FIXME",defaultMessage:"FIXME"},name:"relation",size:12,type:"relation"}]}]}},string(){return{sections:[{sectionTitle:null,items:[xe]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:c("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:c("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:c("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:c("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},text(){return{sections:[{sectionTitle:null,items:[xe]},{sectionTitle:null,items:[{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"type",size:12,type:"radio-group",radios:[{title:{id:c("form.attribute.text.option.short-text"),defaultMessage:"Sort text"},description:{id:c("form.attribute.text.option.short-text.description"),defaultMessage:"Best for titles, names, links (URL). It also enables exact search on the field."},value:"string"},{title:{id:c("form.attribute.text.option.long-text"),defaultMessage:"Long text"},description:{id:c("form.attribute.text.option.long-text.description"),defaultMessage:"Best for descriptions, biography. Exact search is disabled."},value:"text"}]}]}]}},uid(e,t,n){const r=n.filter(({type:s})=>["string","text"].includes(s)).map(({name:s})=>({key:s,value:s,metadatas:{intlLabel:{id:`${s}.no-override`,defaultMessage:s}}}));return{sections:[{sectionTitle:null,items:[{...xe,placeholder:{id:c("modalForm.attribute.form.base.name.placeholder"),defaultMessage:"e.g. slug, seoUrl, canonicalUrl"}},{intlLabel:{id:c("modalForm.attribute.target-field"),defaultMessage:"Attached field"},name:"targetField",type:"select",options:[{key:"__null_reset_value__",value:"",metadatas:{intlLabel:{id:"global.none",defaultMessage:"None"}}},...r]}]}]}}},Tn={advanced:nc,base:ac},Tt=e=>e?ci(e,{decamelize:!1,lowercase:!1,separator:"_"}):"",ka=/^[A-Za-z][_0-9A-Za-z]*$/,$a=e=>({name:"attributeNameAlreadyUsed",message:W.unique.id,test(t){if(!t)return!1;const n=U.snakeCase(t);return!e.some(r=>U.snakeCase(r)===n)}}),At=e=>({name:"forbiddenAttributeName",message:c("error.attributeName.reserved-name"),test(t){if(!t)return!1;const n=U.snakeCase(t);return!e.some(r=>U.snakeCase(r)===n)}}),f={default:()=>V().nullable(),max:()=>be().integer().nullable(),min:()=>be().integer().when("max",(e,t)=>e?t.max(e,c("error.validation.minSupMax")):t).nullable(),maxLength:()=>be().integer().positive(c("error.validation.positive")).nullable(),minLength:()=>be().integer().min(1).when("maxLength",(e,t)=>e?t.max(e,c("error.validation.minSupMax")):t).nullable(),name(e,t){return V().test($a(e)).test(At(t)).matches(ka,W.regex.id).required(W.required.id)},required:()=>Be(),type:()=>V().required(W.required.id),unique:()=>Be().nullable()},vt=(e,t)=>({name:f.name(e,t),type:f.type(),default:f.default(),unique:f.unique(),required:f.required(),maxLength:f.maxLength(),minLength:f.minLength(),regex:V().test({name:"isValidRegExpPattern",message:c("error.validation.regex"),test(r){try{return new RegExp(r||"")!==null}catch{return!1}}}).nullable()}),Mt=()=>({name:"isMinSuperiorThanMax",message:c("error.validation.minSupMax"),test(e){if(!e)return!0;const{max:t}=this.parent;return!t||Number.isNaN(xt(e))?!0:xt(t)>=xt(e)}}),Ke={date(e,t){const n={name:f.name(e,t),type:f.type()};return Z(n)},datetime(e,t){const n={name:f.name(e,t),type:f.type()};return Z(n)},time(e,t){const n={name:f.name(e,t),type:f.type()};return Z(n)},default(e,t){const n={name:f.name(e,t),type:f.type()};return Z(n)},biginteger(e,t){const n={name:f.name(e,t),type:f.type(),default:V().nullable().matches(/^-?\d*$/),unique:f.unique(),required:f.required(),max:V().nullable().matches(/^-?\d*$/,W.regex.id),min:V().nullable().test(Mt()).matches(/^-?\d*$/,W.regex.id)};return Z(n)},boolean(e,t){const n={name:f.name(e,t),default:Be().nullable(),required:f.required(),unique:f.unique()};return Z(n)},component(e,t){const n={name:f.name(e,t),type:f.type(),required:f.required(),max:f.max(),min:f.min(),component:V().required(W.required.id)};return Z(n)},decimal(e,t){const n={name:f.name(e,t),type:f.type(),default:be(),required:f.required(),max:be(),min:be().test(Mt())};return Z(n)},dynamiczone(e,t){const n={name:f.name(e,t),type:f.type(),required:f.required(),max:f.max(),min:f.min()};return Z(n)},email(e,t){const n={name:f.name(e,t),type:f.type(),default:V().email().nullable(),unique:f.unique(),required:f.required(),maxLength:f.maxLength(),minLength:f.minLength()};return Z(n)},enumeration(e,t){const n=/^[_A-Za-z][_0-9A-Za-z]*$/,r={name:V().test($a(e)).test(At(t)).matches(n,W.regex.id).required(W.required.id),type:f.type(),default:f.default(),unique:f.unique(),required:f.required(),enum:an().of(V()).min(1,W.min.id).test({name:"areEnumValuesUnique",message:c("error.validation.enum-duplicate"),test(s){return s?!Ql(s.map(Tt).filter((o,l,d)=>d.indexOf(o)!==l)).length:!1}}).test({name:"doesNotHaveEmptyValues",message:c("error.validation.enum-empty-string"),test:s=>s?!s.map(Tt).some(i=>i===""):!1}).test({name:"doesMatchRegex",message:c("error.validation.enum-regex"),test:s=>s?s.map(Tt).every(i=>n.test(i)):!1}),enumName:V().nullable()};return Z(r)},float(e,t){const n={name:f.name(e,t),type:f.type(),required:f.required(),default:be(),max:be(),min:be().test(Mt())};return Z(n)},integer(e,t){const n={name:f.name(e,t),type:f.type(),default:be().integer(),unique:f.unique(),required:f.required(),max:f.max(),min:f.min()};return Z(n)},json(e,t){const n={name:f.name(e,t),type:f.type(),required:f.required(),unique:f.unique()};return Z(n)},media(e,t){const n={name:f.name(e,t),type:f.type(),multiple:Be(),required:f.required(),allowedTypes:an().of(V().oneOf(["images","videos","files","audios"])).min(1).nullable()};return Z(n)},password(e,t){const n={name:f.name(e,t),type:f.type(),default:f.default(),unique:f.unique(),required:f.required(),maxLength:f.maxLength(),minLength:f.minLength()};return Z(n)},relation(e,t,n,{initialData:r,modifiedData:s}){const i={name:f.name(e,t),target:V().required(W.required.id),relation:V().required(),type:V().required(),targetAttribute:si(()=>{const o=It(s.relation,s.targetAttribute);if(o==="oneWay"||o==="manyWay")return V().nullable();const l=V().test(At(t)),m=[...n.map(({name:u})=>u),s.name].filter(u=>u!==r.targetAttribute);return l.matches(ka,W.regex.id).test({name:"forbiddenTargetAttributeName",message:c("error.validation.relation.targetAttribute-taken"),test(u){return u?!m.includes(u):!1}}).required(W.required.id)})};return Z(i)},richtext(e,t){const n={name:f.name(e,t),type:f.type(),default:f.default(),unique:f.unique(),required:f.required(),maxLength:f.maxLength(),minLength:f.minLength()};return Z(n)},blocks(e,t){const n={name:f.name(e,t),type:f.type(),default:f.default(),unique:f.unique(),required:f.required(),maxLength:f.maxLength(),minLength:f.minLength()};return Z(n)},string(e,t){const n=vt(e,t);return Z(n)},text(e,t){const n=vt(e,t);return Z(n)},uid(e,t){const n=vt(e,t);return Z(n)}},Ra=/^[A-Za-z][-_0-9A-Za-z]*$/,sc=e=>{const t={name:V().matches(Ra,W.regex.id).test({name:"nameNotAllowed",message:W.unique.id,test(n){return n?!e.includes(n?.toLowerCase()):!1}}).required(W.required.id)};return Z(t)},rc={base:{sections:[{sectionTitle:null,items:[{autoFocus:!0,name:"name",type:"text",intlLabel:{id:"global.name",defaultMessage:"Name"},description:{id:c("modalForm.editCategory.base.name.description"),defaultMessage:"No space is allowed for the name of the category"}}]}]}},oc=(e,t,n,r,s)=>{const i={displayName:V().test({name:"nameAlreadyUsed",message:W.unique.id,test(o){if(!o)return!1;const l=Xe(o,n),d=U.snakeCase(l),m=U.snakeCase(s);return e.every(u=>U.snakeCase(u)!==d)&&r.every(u=>U.snakeCase(u)!==m)}}).test({name:"nameNotAllowed",message:c("error.contentTypeName.reserved-name"),test(o){if(!o)return!1;const l=U.snakeCase(o);return t.every(d=>U.snakeCase(d)!==l)}}).required(W.required.id),category:V().matches(Ra,W.regex.id).required(W.required.id),icon:V()};return Z(i)},vn={name:"displayName",type:"text",intlLabel:{id:c("contentType.displayName.label"),defaultMessage:"Display name"}},wt={advanced:{default(){return{sections:[{items:[{intlLabel:{id:c("contentType.draftAndPublish.label"),defaultMessage:"Draft & publish"},description:{id:c("contentType.draftAndPublish.description"),defaultMessage:"Allows writing a draft version of an entry, before it is published"},name:"draftAndPublish",type:"toggle-draft-publish",validations:{}}]}]}}},base:{create(){return{sections:[{sectionTitle:null,items:[vn,{description:{id:c("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:c("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text-singular"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{description:{id:c("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:c("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text-plural"}]}]}},edit(){return{sections:[{sectionTitle:null,items:[vn,{disabled:!0,description:{id:c("contentType.apiId-singular.description"),defaultMessage:"Used to generate the API routes and databases tables/collections"},intlLabel:{id:c("contentType.apiId-singular.label"),defaultMessage:"API ID (Singular)"},name:"singularName",type:"text"},{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{disabled:!0,description:{id:c("contentType.apiId-plural.description"),defaultMessage:"Pluralized API ID"},intlLabel:{id:c("contentType.apiId-plural.label"),defaultMessage:"API ID (Plural)"},name:"pluralName",type:"text"},{intlLabel:{id:"global.type",defaultMessage:"Type"},name:"kind",type:"content-type-radio-group",size:12,radios:[{title:{id:c("form.button.collection-type.name"),defaultMessage:"Collection Type"},description:{id:c("form.button.collection-type.description"),defaultMessage:"Best for multiple instances like articles, products, comments, etc."},value:"collectionType"},{title:{id:c("form.button.single-type.name"),defaultMessage:"Single Type"},description:{id:c("form.button.single-type.description"),defaultMessage:"Best for single instance like about us, homepage, etc."},value:"singleType"}]}]}]}}}},ic=({usedContentTypeNames:e=[],reservedModels:t=[],singularNames:n=[],pluralNames:r=[],collectionNames:s=[]})=>{const i={displayName:V().test({name:"nameAlreadyUsed",message:W.unique.id,test(o){if(!o)return!1;const l=Jn(o),d=U.snakeCase(l);return!e.some(m=>U.snakeCase(m)===d)}}).test({name:"nameNotAllowed",message:c("error.contentTypeName.reserved-name"),test(o){if(!o)return!1;const l=U.snakeCase(o);return!t.some(d=>U.snakeCase(d)===l)}}).required(W.required.id),pluralName:V().test({name:"pluralNameAlreadyUsed",message:W.unique.id,test(o){if(!o)return!1;const l=U.snakeCase(o);return!r.some(d=>U.snakeCase(d)===l)}}).test({name:"pluralNameAlreadyUsedAsSingular",message:c("error.contentType.pluralName-equals-singularName"),test(o){if(!o)return!1;const l=U.snakeCase(o);return!n.some(d=>U.snakeCase(d)===l)}}).test({name:"pluralAndSingularAreUnique",message:c("error.contentType.pluralName-used"),test(o,l){return o?U.snakeCase(l.parent.singularName)!==U.snakeCase(o):!1}}).test({name:"pluralNameNotAllowed",message:c("error.contentTypeName.reserved-name"),test(o){if(!o)return!1;const l=U.snakeCase(o);return!t.some(d=>U.snakeCase(d)===l)}}).test({name:"pluralNameNotAlreadyUsedInCollectionName",message:c("error.contentType.pluralName-equals-collectionName"),test(o){if(!o)return!1;const l=U.snakeCase(o);return!s.some(d=>U.snakeCase(d)===l)}}).required(W.required.id),singularName:V().test({name:"singularNameAlreadyUsed",message:W.unique.id,test(o){if(!o)return!1;const l=U.snakeCase(o);return!n.some(d=>U.snakeCase(d)===l)}}).test({name:"singularNameAlreadyUsedAsPlural",message:c("error.contentType.singularName-equals-pluralName"),test(o){if(!o)return!1;const l=U.snakeCase(o);return!r.some(d=>U.snakeCase(d)===l)}}).test({name:"pluralAndSingularAreUnique",message:c("error.contentType.singularName-used"),test(o,l){return o?U.snakeCase(l.parent.pluralName)!==U.snakeCase(o):!1}}).test({name:"singularNameNotAllowed",message:c("error.contentTypeName.reserved-name"),test(o){if(!o)return!1;const l=U.snakeCase(o);return!t.some(d=>U.snakeCase(d)===l)}}).required(W.required.id),draftAndPublish:Be(),kind:V().oneOf(["singleType","collectionType"])};return Z(i)},jt={advanced:{default(){return{sections:Le.advanced()}}},base:{createComponent(){return{sections:[{sectionTitle:null,items:[St]},...Le.base("componentToCreate.")]}},default(){return{sections:[{sectionTitle:null,items:[St]},{sectionTitle:null,items:[{type:"pushRight",size:6,intlLabel:{id:"",defaultMessage:""},name:"pushRight"},{name:"components",type:"select-components",intlLabel:{id:c("modalForm.attributes.select-components"),defaultMessage:"Select the components"},isMultiple:!0}]}]}}}},Mn=(e,t)=>{e.forEach(n=>{if(!("sectionTitle"in n)){t[0].items?.push(n);return}t.push(n)})},lc=(e,t)=>`components_${U.snakeCase(t)}_${Qe(U.snakeCase(e))}`,wn=(e,t)=>e.filter(({name:n})=>n!==t.initialData.name).map(({name:n})=>n),Me={customField:{schema({schemaAttributes:e,attributeType:t,customFieldValidator:n,reservedNames:r,schemaData:s,ctbFormsAPI:i}){const o=wn(e,s);let l;return t==="relation"?l=Ke[t](o,r.attributes,[],{initialData:{},modifiedData:{}}):l=Ke[t](o,r.attributes),i.makeCustomFieldValidator(l,n,o,r.attributes,s)},form:{base({customField:e}){const t=[{sectionTitle:null,items:[xe]}];return e.options?.base&&Mn(e.options.base,t),{sections:t}},advanced({customField:e,data:t,step:n,extensions:r,...s}){const i=[{sectionTitle:null,items:[]}],o=r.getAdvancedForm(["attribute",e.type],{data:t,type:e.type,step:n,...s});if(e.options?.advanced&&Mn(e.options.advanced,i),o){const l={sectionTitle:{id:c("modalForm.custom-fields.advanced.settings.extended"),defaultMessage:"Extended settings"},items:o};i.push(l)}return{sections:i}}}},attribute:{schema(e,t,n,r,s,i){const o=e?.schema?.attributes??[],l=wn(o,s);try{const d=Ke[t](l,n.attributes,r,s);return i.makeValidator(["attribute",t],d,l,n.attributes,r,s)}catch(d){return console.error("Error yup build schema",d),Ke.default(l,n.attributes)}},form:{advanced({data:e,type:t,step:n,extensions:r,...s}){try{const i=Tn.advanced[t](e,n).sections,o=r.getAdvancedForm(["attribute",t],{data:e,type:t,step:n,...s});return{sections:i.reduce((d,m)=>(m.sectionTitle===null?d.push(m):d.push({...m,items:[...m.items,...o]}),d),[])}}catch(i){return console.error(i),{sections:[]}}},base({data:e,type:t,step:n,attributes:r}){try{return Tn.base[t](e,n,r)}catch{return tc}}}},contentType:{schema(e,t,n,r,s,i){const o=Object.values(i).map(h=>h.schema.singularName),l=Object.values(i).map(h=>h?.schema?.pluralName??""),d=t?e.filter(h=>h!==n):e,m=t?o.filter(h=>{const{schema:C}=i[n];return C.singularName!==h}):o,u=t?l.filter(h=>{const{schema:C}=i[n];return C.pluralName!==h}):l,p=Object.values(i).map(h=>h?.schema?.collectionName??""),x=t?p.filter(h=>{const{schema:C}=i[n],w=C.collectionName;return h!==w}):p,b=ic({usedContentTypeNames:d,reservedModels:r.models,singularNames:m,pluralNames:u,collectionNames:x});return s.makeValidator(["contentType"],b,d,r.models,m,u)},form:{base({actionType:e}){return e==="create"?wt.base.create():wt.base.edit()},advanced({extensions:e}){const t=wt.advanced.default().sections.map(r=>r.items).flat(),n=e.getAdvancedForm(["contentType"]);return{sections:[{items:[...t,...n]}]}}}},component:{schema(e,t,n,r=!1,s,i,o=null){const l=r?e.filter(p=>p!==o):e,d=Object.values(s).map(p=>p?.schema?.collectionName),m=lc(i,t),u=r?d.filter(p=>p!==m):d;return oc(l,n.models,t,u,m)},form:{advanced(){return{sections:Le.advanced()}},base(){return{sections:Le.base()}}}},addComponentToDynamicZone:{form:{advanced(){return jt.advanced.default()},base({data:e}){return e?.createComponent??!1?jt.base.createComponent():jt.base.default()}}},editCategory:{schema(e,t){const n=e.filter(r=>r!==t.name).map(r=>r.toLowerCase());return sc(n)},form:{advanced:()=>({sections:[]}),base(){return rc.base}}}},dc=()=>e=>e[`${se}_formModal`]||ri,cc=()=>Xn(dc(),e=>e),uc=(e,t)=>{const n=R(e,["contentType","schema","kind"],"");return n==="singleType"||n===t.kind?!0:R(e,["contentType","schema","attributes"],[]).filter(({relation:i,type:o,targetAttribute:l})=>{const d=It(i,l);return o==="relation"&&!["oneWay","manyWay"].includes(d||"")}).length===0},mc=(e="",t,n)=>{const r=["text","boolean","blocks","json","number","email","date","password","media","enumeration","relation","richtext"],s=e==="contentType";if(s)return[[...r.slice(0,-1),"uid",...r.slice(-1)],["component","dynamiczone"]];if(e){const o=ja(t,n)>=sa;if(!s&&!o)return[r,["component"]]}return[r]},jn=e=>e.reduce((t,n)=>{const r=n.items.reduce((s,i)=>(i.name&&s.push(i.name),s),[]);return[...t,...r]},[]),pc=ye.form`
  overflow: auto;
`,fc=()=>{const{onCloseModal:e,onNavigateToChooseAttributeModal:t,onNavigateToAddCompoToDZModal:n,onNavigateToCreateComponentStep2:r,actionType:s,attributeName:i,attributeType:o,customFieldUid:l,categoryName:d,dynamicZoneTarget:m,forTarget:u,modalType:p,isOpen:x,kind:b,step:h,targetUid:C,showBackLink:w,activeTab:A,setActiveTab:y}=Ie(),g=ze("FormModal",q=>q.getPlugin),I=ze("FormModal",q=>q.customFields.get)(l),Y=N.useMemo(cc,[]),D=rt(),{toggleNotification:Q}=at(),_=ha(q=>Y(q),dl),de=Vo(),{trackUsage:H}=nt(),{formatMessage:P}=z(),G=g(se)?.apis.forms,T=G.components.inputs,{addAttribute:j,addCustomFieldAttribute:v,addCreatedComponentToDynamicZone:De,allComponentsCategories:Ee,changeDynamicZoneComponents:ot,contentTypes:Se,components:Te,createSchema:Ae,deleteCategory:it,deleteData:He,editCategory:lt,editCustomFieldAttribute:dt,submitData:ct,modifiedData:oe,nestedComponents:Ze,setModifiedData:ut,sortedContentTypesList:mt,updateSchema:pt,reservedNames:ge}=Fe(),{componentToCreate:qe,formErrors:M,initialData:F,isCreatingComponentWhileAddingAField:O,modifiedData:$}=_,te=u==="contentType"||u==="component"?[u]:[u,C];N.useEffect(()=>{if(x){const q=mt.filter(Ca);p==="editCategory"&&ut(),s==="edit"&&p==="attribute"&&u==="contentType"&&H("willEditFieldOfContentType");const ce=[...te,"schema","attributes"],he=$t(R(oe,ce,[]),m)||null;if(p==="editCategory"&&s==="edit"&&D(J.setDataToEdit({data:{name:d}})),p==="contentType"&&s==="create"&&D(J.setDataToEdit({data:{draftAndPublish:!0}})),p==="contentType"&&s==="edit"){const{displayName:B,draftAndPublish:ae,kind:pe,pluginOptions:le,pluralName:Wa,singularName:Ha}=R(oe,[...te,"schema"],{displayName:null,pluginOptions:{},singularName:null,pluralName:null});D(J.setDataToEdit({data:{displayName:B,draftAndPublish:ae,kind:pe,pluginOptions:le,pluralName:Wa,singularName:Ha}}))}if(p==="component"&&s==="edit"){const B=R(oe,te,{});D(J.setDataToEdit({data:{displayName:B.schema.displayName,category:B.category,icon:B.schema.icon}}))}if(p==="addComponentToDynamicZone"&&s==="edit"){const B={...he,components:[],name:m,createComponent:!1,componentToCreate:{type:"component"}};D(J.setDynamicZoneDataSchema({attributeToEdit:B}))}if(o){const ae={...$t(R(oe,ce,[]),i),name:i};o==="component"&&s==="edit"&&(ae.repeatable||Yn(ae,"repeatable",!1)),D(p==="customField"?s==="edit"?J.setCustomFieldDataSchema({isEditing:!0,modifiedDataToSetForEditing:ae}):J.setCustomFieldDataSchema({customField:I,isEditing:!1,modifiedDataToSetForEditing:ae}):J.setAttributeDataSchema({attributeType:o,nameToSetForRelation:R(q,["0","title"],"error"),targetUid:R(q,["0","uid"],"error"),isEditing:s==="edit",modifiedDataToSetForEditing:ae,step:h}))}}else D(J.resetProps())},[s,i,o,d,m,u,x,p]);const ie=p==="contentType",ue=p==="component",Oe=p==="attribute",Ot=p==="customField",Pt=o==="component"&&Oe,Pe=s==="create",ve=R($,"createComponent",!1)||O,Ne=h==="1",_t=p==="editCategory",Ut=p==="chooseAttribute",ft=Jn($.displayName||""),gt=R(oe,[...te,"schema","attributes"],null),Aa=async()=>{let q;const ce=ve&&h==="1"?R($,"componentToCreate",{}):$;if(ie)q=Me.contentType.schema(Object.keys(Se),s==="edit",R(oe,[...te,"uid"],null),ge,G,Se);else if(ue)q=Me.component.schema(Object.keys(Te),$.category||"",ge,s==="edit",Te,$.displayName||"",R(oe,[...te,"uid"],null));else if(Ot)q=Me.customField.schema({schemaAttributes:R(oe,[...te,"schema","attributes"],[]),attributeType:I.type,reservedNames:ge,schemaData:{modifiedData:$,initialData:F},ctbFormsAPI:G,customFieldValidator:I.options?.validator});else if(Pt&&ve&&Ne)q=Me.component.schema(Object.keys(Te),R($,"componentToCreate.category",""),ge,s==="edit",Te,$.componentToCreate.displayName||"");else if(Oe&&!Ne){const he=o==="relation"?"relation":$.type;let B=[];if(he==="relation"){const ae=R($,["target"],null);B=R(Se,[ae,"schema","attributes"],[]).filter(({name:le})=>s!=="edit"?!0:le!==F.targetAttribute)}q=Me.attribute.schema(R(oe,te,{}),he,ge,B,{modifiedData:$,initialData:F},G)}else if(_t)q=Me.editCategory.schema(Ee,F);else if(Ne&&ve)q=Me.component.schema(Object.keys(Te),R($,"componentToCreate.category",""),ge,s==="edit",Te,$.componentToCreate.displayName||"");else return;await q.validate(ce,{abortEarly:!1})},zt=N.useCallback(({target:{name:q,value:ce,type:he,...B}})=>{const ae=["enumName","max","min","maxLength","minLength","regex","default"];let pe;ae.includes(q)&&ce===""?pe=null:pe=ce;const le=Object.assign({},M);q==="max"&&delete le.min,q==="maxLength"&&delete le.minLength,delete le[q],D(J.setErrors({errors:le})),D(J.onChange({keys:q.split("."),value:pe}))},[D,M]),me=async(q,ce=Pe)=>{q.preventDefault();try{await Aa(),Ia(ce);const he=u==="components"?C:ft;if(ie)if(Pe)Ae({...$,kind:b},p,ft),de({pathname:`/plugins/${se}/content-types/${ft}`}),t({forTarget:u,targetUid:he});else{uc(oe,$)?(e(),await ct($)):Q({type:"danger",message:P({id:"notification.contentType.relations.conflict"})});return}else if(p==="component")if(Pe){const B=Xe($.displayName,$.category),{category:ae,...pe}=$;Ae(pe,"component",B,ae),de({pathname:`/plugins/${se}/component-categories/${ae}/${B}`}),t({forTarget:u,targetUid:B})}else{pt($,p,C),e();return}else if(_t){if(dn(F.name)===dn($.name)){e();return}lt(F.name,$);return}else if(Ot){const B={attributeToSet:{...$,customField:l},forTarget:u,targetUid:C,initialAttribute:F};s==="edit"?dt(B):v(B),ce?t({forTarget:u,targetUid:he}):e();return}else if(Oe&&!ve){if(o==="dynamiczone"){j($,u,C,s==="edit",F),Pe?(D(J.resetPropsAndSetTheFormForAddingACompoToADz()),y("basic"),n({dynamicZoneTarget:$.name})):e();return}if(!Pt){j($,u,C,s==="edit",F),ce?t({forTarget:u,targetUid:he}):e();return}if(Ne){r(),D(J.resetPropsAndSetFormForAddingAnExistingCompo({}));return}j($,u,C,s==="edit",F,!0),ce?t({forTarget:u,targetUid:C}):e()}else if(Oe&&ve){if(Ne){H("willCreateComponentFromAttributesModal"),D(J.resetPropsAndSaveCurrentData({})),r();return}const{category:B,type:ae,...pe}=qe,le=Xe(qe.displayName,B);Ae(pe,ae,le,B,ve),j($,u,C,!1),D(J.resetProps()),ce?t({forTarget:"components",targetUid:le}):e();return}else{if(Ne)if(ve){const{category:B,type:ae,...pe}=$.componentToCreate,le=Xe($.componentToCreate.displayName,B);Ae(pe,ae,le,B,ve),De(m,[le]),t({forTarget:"components",targetUid:le})}else ot(m,$.components),e();else console.error("This case is not handled");return}D(J.resetProps())}catch(he){const B=sd(he);D(J.setErrors({errors:B}))}},Na=()=>{window.confirm(P({id:"window.confirm.close-modal.file",defaultMessage:"Are you sure? Your changes will be lost."}))&&(e(),D(J.resetProps()))},Bt=()=>{st($,F)?(e(),D(J.resetProps())):Na()},La=q=>{if(q==="advanced"){if(ie){H("didSelectContentTypeSettings");return}u==="contentType"&&H("didSelectContentTypeFieldSettings")}},Ia=q=>{p==="attribute"&&u==="contentType"&&o!=="dynamiczone"&&q&&H("willAddMoreFieldToContentType")},Da=()=>!!(p==="editCategory"||p==="component"||ti($,"createComponent")),Ea=mc(u,C,Ze);if(!p)return null;const Vt=R(Me,[p,"form"],{advanced:()=>({sections:[]}),base:()=>({sections:[]})}),qa=u==="components"||u==="component",Wt={customInputs:{"allowed-types-select":od,"boolean-radio-group":Cd,"checkbox-with-number-field":Td,"icon-picker":Sd,"content-type-radio-group":vd,"radio-group":qt,relation:Gd,"select-category":Kd,"select-component":Yd,"select-components":Jd,"select-default-boolean":yd,"select-number":Fa,"select-date":Xd,"toggle-draft-publish":Md,"text-plural":Ad,"text-singular":Qd,"textarea-enum":ec,...T},componentToCreate:qe,dynamicZoneTarget:m,formErrors:M,isAddingAComponentToAnotherComponent:qa,isCreatingComponentWhileAddingAField:O,mainBoxHeader:R(oe,[...te,"schema","displayName"],""),modifiedData:$,naturePickerType:u,isCreating:Pe,targetUid:C,forTarget:u},Ht=Vt.advanced({data:$,type:o,step:h,actionType:s,attributes:gt,extensions:G,forTarget:u,contentTypeSchema:oe.contentType||{},customField:I}).sections,Zt=Vt.base({data:$,type:o,step:h,actionType:s,attributes:gt,extensions:G,forTarget:u,contentTypeSchema:oe.contentType||{},customField:I}).sections,Oa=jn(Zt),Pa=jn(Ht),_a=Object.keys(M).some(q=>Oa.includes(q)),Ua=Object.keys(M).some(q=>Pa.includes(q)),za=R(Se,[C,"schema","kind"]),Ba=()=>s==="edit"&&gt.every(({name:q})=>q!==$?.name),Va=()=>{Ba()&&H("didEditFieldNameOnContentType")};return a.jsx(je.Root,{open:x,onOpenChange:Bt,children:a.jsxs(je.Content,{children:[a.jsx(jd,{actionType:s,attributeName:i,categoryName:d,contentTypeKind:b,dynamicZoneTarget:m,modalType:p,forTarget:u,targetUid:C,attributeType:o,customFieldUid:l,showBackLink:w}),Ut&&a.jsx(bd,{attributes:Ea,forTarget:u,kind:za||"collectionType"}),!Ut&&a.jsxs(pc,{onSubmit:me,children:[a.jsx(je.Body,{children:a.jsxs(fe.Root,{variant:"simple",value:A,onValueChange:q=>{y(q),La(q)},hasError:_a?"basic":Ua?"advanced":void 0,children:[a.jsxs(E,{justifyContent:"space-between",children:[a.jsx(kd,{actionType:s,forTarget:u,kind:b,step:h,modalType:p,attributeType:o,attributeName:i,customField:I}),a.jsxs(fe.List,{children:[a.jsx(fe.Trigger,{value:"basic",children:P({id:c("popUpForm.navContainer.base"),defaultMessage:"Basic settings"})}),a.jsx(fe.Trigger,{value:"advanced",disabled:Da(),children:P({id:c("popUpForm.navContainer.advanced"),defaultMessage:"Advanced settings"})})]})]}),a.jsx(Nt,{marginBottom:6}),a.jsx(fe.Content,{value:"basic",children:a.jsx(E,{direction:"column",alignItems:"stretch",gap:6,children:a.jsx(Cn,{form:Zt,formErrors:M,genericInputProps:Wt,modifiedData:$,onChange:zt})})}),a.jsx(fe.Content,{value:"advanced",children:a.jsx(E,{direction:"column",alignItems:"stretch",gap:6,children:a.jsx(Cn,{form:Ht,formErrors:M,genericInputProps:Wt,modifiedData:$,onChange:zt})})})]})}),a.jsxs(je.Footer,{children:[a.jsx(X,{variant:"tertiary",onClick:Bt,children:P({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),a.jsx(wd,{deleteCategory:it,deleteContentType:He,deleteComponent:He,categoryName:F.name,isAttributeModal:p==="attribute",isCustomFieldModal:p==="customField",isComponentToDzModal:p==="addComponentToDynamicZone",isComponentAttribute:o==="component",isComponentModal:p==="component",isContentTypeModal:p==="contentType",isCreatingComponent:s==="create",isCreatingDz:s==="create",isCreatingComponentAttribute:$.createComponent||!1,isCreatingComponentInDz:$.createComponent||!1,isCreatingComponentWhileAddingAField:O,isCreatingContentType:s==="create",isEditingAttribute:s==="edit",isDzAttribute:o==="dynamiczone",isEditingCategory:p==="editCategory",isInFirstComponentStep:h==="1",onSubmitAddComponentAttribute:me,onSubmitAddComponentToDz:me,onSubmitCreateComponent:me,onSubmitCreateContentType:me,onSubmitCreateDz:me,onSubmitEditAttribute:me,onSubmitEditCategory:me,onSubmitEditComponent:me,onSubmitEditContentType:me,onSubmitEditCustomFieldAttribute:me,onSubmitEditDz:me,onClickFinish:Va})]})]})]})})},gc=()=>e=>e[`${se}_dataManagerProvider`]||ni,hc=()=>Xn(gc(),e=>e),bc=(e,t)=>{const n=Object.keys(e).filter(r=>{const s=R(e,r,{}),i=R(t,r,{}),o=R(s,["isTemporary"],!1),l=!st(s,i);return o||l});return Qn(n)},yc=(e,t)=>{const n=Sa(R(e,"schema.attributes",[]),t),r=R(e,"isTemporary",!1)?{tmpUID:e.uid}:{uid:e.uid};return Object.assign({},r,{category:e.category},oa(e.schema,"attributes"),{attributes:n})},Fn=(e,t=!1)=>{const n=R(e,"uid",null),r=Sa(R(e,"schema.attributes",[]),n),s=t?{category:R(e,"category","")}:{},i=Object.assign(s,oa(e.schema,"attributes"),{attributes:r});return delete i.uid,delete i.isTemporary,delete i.visible,delete i.restrictRelationsTo,i},Sa=(e,t)=>e.reduce((n,{name:r,...s})=>{const i=s,o=i.target===t,l=i.type==="relation",d=R(i,"targetAttribute",null);if(!o)if(l){const m=Object.assign({},i,{targetAttribute:kn(d)});n[r]=Ye(m)}else n[r]=Ye(i);if(o){const m=i.target,u=Object.assign({},i,{target:m,targetAttribute:kn(d)});n[r]=Ye(u)}if(i.customField){const m={...i,type:"customField"};n[r]=Ye(m)}return n},{}),kn=e=>e==="-"?null:e,Ye=e=>Object.keys(e).reduce((t,n)=>(e[n]!==null&&n!=="plugin"&&(t[n]=e[n]),t),{}),xc=(e,t,n)=>bc(e,t).map(i=>{const o=R(e,i,{});return yc(o,n)}),Cc=e=>Ti(Object.keys(e).map(t=>({visible:e[t].schema.visible,name:t,title:e[t].schema.displayName,plugin:e[t].plugin||null,uid:t,to:`/plugins/${se}/content-types/${t}`,kind:e[t].schema.kind,restrictRelationsTo:e[t].schema.restrictRelationsTo})).filter(t=>t!==null),t=>Wo(t.title)),$n=e=>e.reduce((t,n)=>(t[n.uid]=n,t),{}),Tc=(e,t,n,r)=>{const s=t.reduce((l,d)=>{const m=R(n,d,{});return l[d]=m,l},{});return{[r?"contentType":"component"]:e,components:s}},Rn=e=>Object.keys(e).reduce((t,n)=>{const r=e[n].schema;return t[n]={...e[n],schema:{...r,attributes:vc(r.attributes)}},t},{}),vc=e=>Object.keys(e).reduce((t,n)=>(t.push({...e[n],name:n}),t),[]),Mc=e=>Object.keys(e).reduce((n,r)=>{const s=R(e,[r]),i=wc(s);return i.childComponents.length>0&&n.push(i),n},[]),wc=e=>{const t=R(e,["schema","attributes"],[]);return{component:e.uid,childComponents:t.filter(n=>{const{type:r}=n;return r==="component"}).map(n=>({component:n.component}))}},jc=e=>{const t=Object.keys(e).reduce((n,r)=>{const s=e?.[r]?.schema?.attributes??[],i=Fc(s,r);return[...n,...i]},[]);return kc(t)},Fc=(e,t)=>e.reduce((n,r)=>{const{type:s,component:i}=r;return s==="component"&&n.push({component:i,parentCompoUid:t}),n},[]),kc=e=>{const t=new Map;return e.forEach(({component:r,parentCompoUid:s})=>{t.has(r)||t.set(r,new Set),t.get(r).add(s)}),Array.from(t.entries()).map(([r,s])=>({component:r,uidsOfAllParents:Array.from(s)}))},$c=(e,t)=>{const n=Object.keys(e).map(r=>R(e,[r,...t],""));return Qn(n)},Sn="did-not-kill-server",Rc="server is down";function Ue(e,t){return new Promise(n=>{fetch(`${window.strapi.backendURL}/_health`,{method:"HEAD",mode:"no-cors",headers:{"Content-Type":"application/json","Keep-Alive":"false"}}).then(r=>{if(r.status>=400)throw new Error(Rc);if(!t)throw new Error(Sn);n(e)}).catch(r=>{setTimeout(()=>Ue(e,r.message!==Sn).then(n),100)})})}const Sc=e=>Object.values(e.attributes).filter(n=>n.type==="dynamiczone").every(n=>Array.isArray(n.components)&&n.components.length>0),Ac=({children:e})=>{const t=rt(),{components:n,contentTypes:r,isLoading:s,initialData:i,modifiedData:o,reservedNames:l}=ha(hc()),{toggleNotification:d}=at(),{lockAppWithAutoreload:m,unlockAppWithAutoreload:u}=qo(),{setCurrentStep:p,setStepState:x}=Kn("DataManagerProvider",M=>M),h=ze("DataManagerProvider",M=>M.getPlugin)(se),C=Oo("DataManagerProvider",M=>M.autoReload),{formatMessage:w}=z(),{trackUsage:A}=nt(),y=Po("DataManagerProvider",M=>M.refetchPermissions),{pathname:g}=_o(),{onCloseModal:S}=Ie(),I=tn(`/plugins/${se}/content-types/:uid`),Y=tn(`/plugins/${se}/component-categories/:categoryUid/:componentUid`),D=Uo(),{put:Q,post:_,del:de}=D,H=C,P=I!==null,ee=P?"contentType":"component",G=P?R(I,"params.uid",null):R(Y,"params.componentUid",null),T=N.useRef(),j=P?"content-types":"components";T.current=async()=>{try{const[M,F,O]=await Promise.all([D.get("/content-type-builder/components"),D.get("/content-type-builder/content-types"),D.get("/content-type-builder/reserved-names")]),$=$n(M.data.data),te=Rn($),ie=$n(F.data.data),ue=Rn(ie);t(re.init({components:te,contentTypes:ue,reservedNames:O.data}))}catch(M){console.error({err:M}),d({type:"danger",message:w({id:"notification.error",defaultMessage:"An error occurred"})})}},N.useEffect(()=>(T.current(),()=>{t(re.reloadPlugin())}),[]),N.useEffect(()=>{!s&&G&&Ze()},[s,g,G]),N.useEffect(()=>{C||d({type:"info",message:w({id:c("notification.info.autoreaload-disable")})})},[C,d,w]);const v=(M,F,O,$=!1,te,ie=!1)=>{if($){const ue={attributeToSet:M,forTarget:F,targetUid:O,initialAttribute:te,shouldAddComponentToData:ie};t(re.editAttribute(ue))}else{const ue={attributeToSet:M,forTarget:F,targetUid:O,shouldAddComponentToData:ie};t(re.addAttribute(ue))}},De=({attributeToSet:M,forTarget:F,targetUid:O})=>{t(re.addCustomFieldAttribute({attributeToSet:M,forTarget:F,targetUid:O}))},Ee=({attributeToSet:M,forTarget:F,targetUid:O,initialAttribute:$})=>{t(re.editCustomFieldAttribute({attributeToSet:M,forTarget:F,targetUid:O,initialAttribute:$}))},ot=(M,F)=>{t(re.addCreatedComponentToDynamicZone({dynamicZoneTarget:M,componentsToAdd:F}))},Se=(M,F,O,$,te=!1)=>{if(F==="contentType"){const ie={data:M,uid:O};t(re.createSchema(ie))}else{const ie={data:M,uid:O,componentCategory:$,shouldAddComponentToData:te};t(re.createComponentSchema(ie))}},Te=(M,F)=>{t(re.changeDynamicZoneComponents({dynamicZoneTarget:M,newComponents:F}))},Ae=(M,F,O="")=>{M==="components"?t(re.removeFieldFromDisplayedComponent({attributeToRemoveName:F,componentUid:O})):(M==="contentType"&&A("willDeleteFieldOfContentType"),t(re.removeField({mainDataKey:M,attributeToRemoveName:F})))},it=async M=>{try{const F=`/${se}/component-categories/${M}`,O=window.confirm(w({id:c("popUpWarning.bodyMessage.category.delete")}));S(),O&&(m?.(),await de(F),await Ue(!0),u?.(),await ge())}catch(F){console.error({err:F}),d({type:"danger",message:w({id:"notification.error",defaultMessage:"An error occurred"})})}finally{u?.()}},He=async()=>{try{const M=`/${se}/${j}/${G}`,F=R(o,[ee,"isTemporary"],!1),O=window.confirm(w({id:c(`popUpWarning.bodyMessage.${P?"contentType":"component"}.delete`)}));if(S(),O){if(F){t(re.deleteNotSavedType());return}m?.(),await de(M),await Ue(!0),await u?.(),await T.current(),await ge()}}catch(M){console.error({err:M}),d({type:"danger",message:w({id:"notification.error",defaultMessage:"An error occurred"})})}finally{u?.()}},lt=async(M,F)=>{try{const O=`/${se}/component-categories/${M}`;S(),m?.(),await Q(O,F),await Ue(!0),await u?.(),await ge()}catch(O){console.error({err:O}),d({type:"danger",message:w({id:"notification.error",defaultMessage:"An error occurred"})})}finally{u?.()}},dt=()=>{const M=Object.assign({},n,o.components);if(!P){const O=R(o,"component",{});Yn(M,R(O,["uid"],""),O)}return Mc(M)},ct=()=>jc(n),oe=(M,F)=>{t(re.removeComponentFromDynamicZone({dzName:M,componentToRemoveIndex:F}))},Ze=()=>{const F=R(P?r:n,G??"",{schema:{attributes:[]}}),O=zo(F.schema.attributes,n),$=Tc(F,O,n,P),te=R(F,"isTemporary",!1)&&al(R(F,"schema.attributes",[]))===0;t(re.setModifiedData({schemaToSet:$,hasJustCreatedSchema:te}))},ut=N.useMemo(()=>{const M=P?r:n;return G==="create-content-type"?!1:!Object.keys(M).includes(G||"")&&!s},[n,r,G,P,s]),mt=N.useMemo(()=>{const M=Object.keys(r).filter(F=>R(r,[F,"schema","visible"],!0)).sort();return R(M,"0","create-content-type")},[r]);if(ut)return a.jsx(Bo,{to:`/plugins/${se}/content-types/${mt}`});const pt=async M=>{try{const F=R(o,[ee,"isTemporary"],!1),O={components:xc(o.components,n,G)};if(P){const ue=(h?.apis?.forms).mutateContentTypeSchema({...Fn(o.contentType),...M},i.contentType);if(!Sc(ue)){d({type:"danger",message:w({id:c("notification.error.dynamiczone-min.validation"),defaultMessage:"At least one component is required in a dynamic zone to be able to save a content type"})});return}O.contentType=ue,A("willSaveContentType")}else O.component=Fn(o.component,!0),A("willSaveComponent");m?.();const $=`/${se}/${j}`,te=F?$:`${$}/${G}`;if(F?await _(te,O):await Q(te,O),F&&(i.contentType?.schema.kind==="collectionType"||i.contentType?.schema.kind==="singleType")&&(x("contentTypeBuilder.success",!0),A("didCreateGuidedTourCollectionType"),p(null)),P){A("didSaveContentType");const ie=R(O,["contentType","schema","name"],""),ue=R(i,["contentType","schema","name"],"");!F&&ie!==ue&&A("didEditNameOfContentType")}else A("didSaveComponent");await Ue(!0),u?.(),await T.current(),await ge()}catch(F){P||A("didNotSaveComponent"),console.error({err:F.response}),d({type:"danger",message:w({id:"notification.error",defaultMessage:"An error occurred"})})}finally{u?.()}},ge=async()=>{await y()},qe=(M,F,O)=>{t(re.updateSchema({data:M,schemaType:F,uid:O}))};return a.jsxs(ya.Provider,{value:{addAttribute:v,addCustomFieldAttribute:De,addCreatedComponentToDynamicZone:ot,allComponentsCategories:$c(n,["category"]),changeDynamicZoneComponents:Te,components:n,componentsGroupedByCategory:yi(n,"category"),componentsThatHaveOtherComponentInTheirAttributes:dt(),contentTypes:r,createSchema:Se,deleteCategory:it,deleteData:He,editCategory:lt,editCustomFieldAttribute:Ee,isInDevelopmentMode:H,initialData:i,isInContentTypeView:P,modifiedData:o,nestedComponents:ct(),removeAttribute:Ae,removeComponentFromDynamicZone:oe,reservedNames:l,setModifiedData:Ze,sortedContentTypesList:Cc(r),submitData:pt,updateSchema:qe},children:[e,H&&a.jsx(fc,{})]})};var Nc=N.memo(Ac);const An={actionType:null,attributeName:null,attributeType:null,categoryName:null,dynamicZoneTarget:null,forTarget:null,modalType:null,isOpen:!1,showBackLink:!1,kind:null,step:null,targetUid:null,customFieldUid:null,activeTab:"basic"},Lc=({children:e})=>{const[t,n]=N.useState(An),{trackUsage:r}=nt(),s=({attributeType:y,customFieldUid:g})=>{n(S=>({...S,actionType:"create",modalType:"customField",attributeType:y,customFieldUid:g,activeTab:"basic"}))},i=({attributeType:y,step:g})=>{t.forTarget==="contentType"&&r("didSelectContentTypeFieldType",{type:y}),n(S=>({...S,actionType:"create",modalType:"attribute",step:g,attributeType:y,showBackLink:!0,activeTab:"basic"}))},o=({dynamicZoneTarget:y,targetUid:g})=>{n(S=>({...S,dynamicZoneTarget:y,targetUid:g,modalType:"addComponentToDynamicZone",forTarget:"contentType",step:"1",actionType:"edit",isOpen:!0}))},l=({forTarget:y,targetUid:g})=>{n(S=>({...S,actionType:"create",forTarget:y,targetUid:g,modalType:"chooseAttribute",isOpen:!0,showBackLink:!1,activeTab:"basic"}))},d=y=>{n(g=>({...g,...y,isOpen:!0,activeTab:"basic"}))},m=y=>{n(g=>({...g,categoryName:y,actionType:"edit",modalType:"editCategory",isOpen:!0,activeTab:"basic"}))},u=({forTarget:y,targetUid:g,attributeName:S,attributeType:I,customFieldUid:Y})=>{n(D=>({...D,modalType:"customField",customFieldUid:Y,actionType:"edit",forTarget:y,targetUid:g,attributeName:S,attributeType:I,isOpen:!0,activeTab:"basic"}))},p=({forTarget:y,targetUid:g,attributeName:S,attributeType:I,step:Y})=>{n(D=>({...D,modalType:"attribute",actionType:"edit",forTarget:y,targetUid:g,attributeName:S,attributeType:I,step:Y,isOpen:!0}))},x=({modalType:y,forTarget:g,targetUid:S,kind:I})=>{n(Y=>({...Y,modalType:y,actionType:"edit",forTarget:g,targetUid:S,kind:I,isOpen:!0,activeTab:"basic"}))},b=()=>{n(An)},h=({forTarget:y,targetUid:g})=>{n(S=>({...S,forTarget:y,targetUid:g,modalType:"chooseAttribute",activeTab:"basic"}))},C=()=>{n(y=>({...y,attributeType:"component",modalType:"attribute",step:"2",activeTab:"basic"}))},w=({dynamicZoneTarget:y})=>{n(g=>({...g,dynamicZoneTarget:y,modalType:"addComponentToDynamicZone",actionType:"create",step:"1",attributeType:null,attributeName:null,activeTab:"basic"}))},A=y=>{n(g=>({...g,activeTab:y}))};return a.jsx(xa.Provider,{value:{...t,onClickSelectField:i,onClickSelectCustomField:s,onCloseModal:b,onNavigateToChooseAttributeModal:h,onNavigateToAddCompoToDZModal:w,onOpenModalAddComponentsToDZ:o,onNavigateToCreateComponentStep2:C,onOpenModalAddField:l,onOpenModalCreateSchema:d,onOpenModalEditCategory:m,onOpenModalEditField:p,onOpenModalEditCustomField:u,onOpenModalEditSchema:x,setFormModalNavigationState:n,setActiveTab:A},children:e})},Nn=N.lazy(()=>Io(()=>import("./ListView-Cl-pbcxP-DAFgrT7v.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),Ic=()=>{const{formatMessage:e}=z(),t=e({id:`${se}.plugin.name`,defaultMessage:"Content Types Builder"}),n=Kn("App",s=>s.startSection),r=N.useRef(n);return N.useEffect(()=>{r.current&&r.current("contentTypeBuilder")},[]),a.jsxs(yt.Protect,{permissions:wo.main,children:[a.jsx(yt.Title,{children:t}),a.jsx(jo,{children:a.jsx(Lc,{children:a.jsx(Nc,{children:a.jsx(Fo.Root,{sideNav:a.jsx(nd,{}),children:a.jsx(N.Suspense,{fallback:a.jsx(yt.Loading,{}),children:a.jsxs(ko,{children:[a.jsx(Qt,{path:"content-types/:uid",element:a.jsx(Nn,{})}),a.jsx(Qt,{path:"component-categories/:categoryUid/:componentUid",element:a.jsx(Nn,{})})]})})})})})})]})};var Bc=Object.freeze({__proto__:null,default:Ic});export{et as A,va as C,Ie as a,c as g,Bc as i,Fe as u};
