import{d as h,F as g,aE as D,ez as H,ey as C,j as t,bs as _,u as L,bA as w,r as x,gE as z,gQ as Q,o as E,P as O,gR as Y,gS as K,gT as X,gU as Z,B as k,gV as J,bN as ee,fU as te,c0 as se,c1 as ne,I as ie,bo as re,W as G,T as I,L as oe,bE as R,aw as ae,gW as ce,aZ as de,v as le,at as ue,bL as pe,bP as U,aM as ge,aa as me,db as he,dQ as fe,cI as xe,V as W,a5 as je,eA as ye,cX as be,gv as ke}from"./strapi-DJtumbce.js";import{v as P,l as Le}from"./lt-D8IC398w.js";import{L as Se,V as A,S as v,N as $}from"./Ornaments-DlP663hn-B3I1vF--.js";import{h as ve,g as Ie}from"./users-B3iOAYG--MOwOr-tf.js";import{P as Te}from"./PrivateRoute-KL_RhoV8-ByI0-aQd.js";import{u as we}from"./useOnce-EHSWW7FY-CjZ9DqR1.js";const Ce="@strapi/admin",Me="5.11.3",Ae="Strapi Admin",Ne={type:"git",url:"git://github.com/strapi/strapi.git"},Ee="SEE LICENSE IN LICENSE",Re={name:"Strapi Solutions SAS",email:"hi@strapi.io",url:"https://strapi.io"},Pe=[{name:"Strapi Solutions SAS",email:"hi@strapi.io",url:"https://strapi.io"}],$e={"./strapi-admin":{types:"./dist/admin/src/index.d.ts",source:"./admin/src/index.ts",import:"./dist/admin/index.mjs",require:"./dist/admin/index.js",default:"./dist/admin/index.js"},"./strapi-admin/ee":{types:"./dist/admin/src/ee.d.ts",source:"./admin/src/ee.ts",import:"./dist/admin/ee.mjs",require:"./dist/admin/ee.js",default:"./dist/admin/ee.js"},"./strapi-admin/test":{types:"./dist/admin/tests/index.d.ts",source:"./admin/tests/index.ts",import:"./dist/admin/test.mjs",require:"./dist/admin/test.js",default:"./dist/admin/test.js"},"./_internal":{types:"./dist/_internal/index.d.ts",source:"./_internal/index.ts",import:"./dist/_internal.mjs",require:"./dist/_internal.js",default:"./dist/_internal.js"},"./strapi-server":{types:"./dist/server/src/index.d.ts",source:"./server/src/index.js",import:"./dist/server/index.mjs",require:"./dist/server/index.js",default:"./dist/server/index.js"},"./package.json":"./package.json"},Be=["dist/"],De={build:"run -T npm-run-all clean --parallel build:code build:types","build:code":"run -T rollup -c","build:types":"run -T run-p build:types:server build:types:admin build:types:internals","build:types:internals":"run -T tsc -p tsconfig.build.json --emitDeclarationOnly","build:types:server":"run -T tsc -p server/tsconfig.build.json --emitDeclarationOnly","build:types:admin":"run -T tsc -p admin/tsconfig.build.json --emitDeclarationOnly",clean:"run -T rimraf ./dist",lint:"run -T eslint .","test:front":"run -T cross-env IS_EE=true jest --config ./jest.config.front.js","test:front:watch":"run -T cross-env IS_EE=true jest --config ./jest.config.front.js --watchAll","test:ts":"run -T tsc -p tsconfig.json","test:ts:back":"run -T tsc --noEmit -p server/tsconfig.json","test:ts:front":"run -T tsc -p admin/tsconfig.json && run -T tsc -p ee/admin/tsconfig.json","test:unit":"run -T jest","test:unit:watch":"run -T jest --watch",watch:"run -T rollup -c -w"},_e={"@casl/ability":"6.5.0","@internationalized/date":"3.5.4","@radix-ui/react-context":"1.0.1","@radix-ui/react-toolbar":"1.0.4","@reduxjs/toolkit":"1.9.7","@strapi/design-system":"2.0.0-rc.18","@strapi/icons":"2.0.0-rc.18","@strapi/permissions":"5.11.3","@strapi/types":"5.11.3","@strapi/typescript-utils":"5.11.3","@strapi/utils":"5.11.3","@testing-library/dom":"10.1.0","@testing-library/react":"15.0.7","@testing-library/user-event":"14.5.2",axios:"1.8.2",bcryptjs:"2.4.3",boxen:"5.1.2",chalk:"^4.1.2",codemirror5:"npm:codemirror@^5.65.11","cross-env":"^7.0.3","date-fns":"2.30.0",execa:"5.1.1","fast-deep-equal":"3.1.3",formik:"2.4.5","fractional-indexing":"3.2.0","fs-extra":"11.2.0","highlight.js":"^10.4.1",immer:"9.0.21",inquirer:"8.2.5",invariant:"^2.2.4","is-localhost-ip":"2.0.0",jsonwebtoken:"9.0.0",koa:"2.15.4","koa-compose":"4.1.0","koa-passport":"6.0.0","koa-static":"5.0.0","koa2-ratelimit":"^1.1.3",lodash:"4.17.21","node-schedule":"2.1.1",ora:"5.4.1","p-map":"4.0.0","passport-local":"1.0.0",pluralize:"8.0.0",punycode:"2.3.1",qs:"6.11.1","react-dnd":"16.0.1","react-dnd-html5-backend":"16.0.1","react-intl":"6.6.2","react-is":"^18.2.0","react-query":"3.39.3","react-redux":"8.1.3","react-select":"5.8.0","react-window":"1.8.10",rimraf:"5.0.5","sanitize-html":"2.13.0",scheduler:"0.23.0",semver:"7.5.4",sift:"16.0.1",typescript:"5.4.4","use-context-selector":"1.4.1",yup:"0.32.9",zod:"^3.22.4"},ze={"@strapi/admin-test-utils":"5.11.3","@strapi/data-transfer":"5.11.3","@types/codemirror5":"npm:@types/codemirror@^5.60.15","@types/fs-extra":"11.0.4","@types/invariant":"2.2.36","@types/jsonwebtoken":"9.0.3","@types/koa-passport":"6.0.1","@types/lodash":"^4.14.191","@types/markdown-it":"13.0.7","@types/markdown-it-container":"2.0.9","@types/markdown-it-emoji":"2.0.4","@types/markdown-it-footnote":"3.0.3","@types/passport-local":"1.0.36","@types/pluralize":"0.0.32","@types/punycode":"2.1.4","@types/react-window":"1.8.8","@types/sanitize-html":"2.13.0","@vitejs/plugin-react-swc":"3.6.0","koa-body":"6.0.1",msw:"1.3.0",react:"18.3.1","react-dom":"18.3.1","react-router-dom":"6.22.3","styled-components":"6.1.8",vite:"5.4.13","vite-plugin-dts":"^4.3.0"},Oe={"@strapi/data-transfer":"^5.0.0",react:"^17.0.0 || ^18.0.0","react-dom":"^17.0.0 || ^18.0.0","react-router-dom":"^6.0.0","styled-components":"^6.0.0"},Ge={node:">=18.0.0 <=22.x.x",npm:">=6.0.0"},Ue={targets:{build:{outputs:["{projectRoot}/build"]}}},We={name:Ce,version:Me,description:Ae,repository:Ne,license:Ee,author:Re,maintainers:Pe,exports:$e,files:Be,scripts:De,dependencies:_e,devDependencies:ze,peerDependencies:Oe,engines:Ge,nx:Ue},Fe=()=>{const e=_("GuidedTourModal",M=>M),{currentStep:s,guidedTourState:n,setCurrentStep:c,setStepState:o,isGuidedTourVisible:l,setSkipped:r}=e,{formatMessage:i}=L(),{trackUsage:u}=E();if(!s||!l)return null;const a=te(Se,s),m=Object.keys(n),[b,S]=s.split("."),d=m.indexOf(b),j=Object.keys(n[b]).indexOf(S),p=d<m.length-1,f=j<Object.keys(n[b]).length-1,y=()=>{o(s,!0),a&&u(a.trackingEvent),c(null)},q=()=>{r(!0),c(null),u("didSkipGuidedtour")};return t.jsx(se,{children:t.jsx(Ve,{onClick:y,padding:8,justifyContent:"center",children:t.jsx(ne,{onEscape:y,children:t.jsxs(g,{direction:"column",alignItems:"stretch",background:"neutral0",width:"66rem",shadow:"popupShadow",hasRadius:!0,padding:4,gap:8,role:"dialog","aria-modal":!0,onClick:M=>M.stopPropagation(),children:[t.jsx(g,{justifyContent:"flex-end",children:t.jsx(ie,{onClick:y,withTooltip:!1,label:i({id:"app.utils.close-label",defaultMessage:"Close"}),children:t.jsx(re,{})})}),t.jsx(k,{paddingLeft:7,paddingRight:7,paddingBottom:!f&&!p?8:0,children:t.jsx(qe,{title:a&&"title"in a?a.title:void 0,cta:a&&"cta"in a?a.cta:void 0,onCtaClick:y,sectionIndex:d,stepIndex:j,hasSectionAfter:p,children:a&&"content"in a&&t.jsx(He,{...a.content})})}),!(!f&&!p)&&t.jsx(g,{justifyContent:"flex-end",children:t.jsx(G,{variant:"tertiary",onClick:q,children:i({id:"app.components.GuidedTour.skip",defaultMessage:"Skip the tour"})})})]})})})})},Ve=h(g)`
  position: fixed;
  z-index: 4;
  inset: 0;
  /* this is theme.colors.neutral800 with opacity */
  background: ${({theme:e})=>`${e.colors.neutral800}1F`};
`,qe=({title:e,children:s,cta:n,onCtaClick:c,sectionIndex:o,stepIndex:l,hasSectionAfter:r})=>{const{formatMessage:i}=L(),u=o>0,a=l>0,m=o+1;return t.jsxs(t.Fragment,{children:[t.jsxs(g,{alignItems:"stretch",children:[t.jsx(g,{marginRight:8,justifyContent:"center",minWidth:"3rem",children:u&&t.jsx(A,{state:v.IS_DONE,minHeight:"2.4rem"})}),t.jsx(I,{variant:"sigma",textColor:"primary600",children:i({id:"app.components.GuidedTour.title",defaultMessage:"3 steps to get started"})})]}),t.jsxs(g,{children:[t.jsx(g,{marginRight:8,minWidth:"3rem",children:t.jsx($,{state:a?v.IS_DONE:v.IS_ACTIVE,paddingTop:3,paddingBottom:3,children:o+1})}),e&&t.jsx(I,{variant:"alpha",fontWeight:"bold",textColor:"neutral800",tag:"h3",id:"title",children:i(e)})]}),t.jsxs(g,{alignItems:"stretch",children:[t.jsx(g,{marginRight:8,direction:"column",justifyContent:"center",minWidth:"3rem",children:r&&t.jsxs(t.Fragment,{children:[t.jsx(A,{state:v.IS_DONE}),a&&t.jsx($,{state:v.IS_ACTIVE,paddingTop:3,children:m+1})]})}),t.jsxs(k,{children:[s,n&&(n.target?t.jsx(oe,{tag:D,endIcon:t.jsx(R,{}),onClick:c,to:n.target,children:i(n.title)}):t.jsx(G,{endIcon:t.jsx(R,{}),onClick:c,children:i(n.title)}))]})]}),a&&r&&t.jsx(k,{paddingTop:3,children:t.jsx(g,{marginRight:8,justifyContent:"center",width:"3rem",children:t.jsx(A,{state:v.IS_DONE,minHeight:"2.4rem"})})})]})},He=({id:e,defaultMessage:s})=>{const{formatMessage:n}=L();return t.jsx(g,{direction:"column",alignItems:"stretch",gap:4,paddingBottom:6,children:n({id:e,defaultMessage:s},{documentationLink:Qe,b:Ye,p:Ke,light:Xe,ul:Ze,li:et})})},Qe=e=>t.jsx(I,{tag:"a",textColor:"primary600",target:"_blank",rel:"noopener noreferrer",href:"https://docs.strapi.io/developer-docs/latest/developer-resources/database-apis-reference/rest-api.html#api-parameters",children:e}),Ye=e=>t.jsx(I,{fontWeight:"semiBold",children:e}),Ke=e=>t.jsx(I,{children:e}),Xe=e=>t.jsx(I,{textColor:"neutral600",children:e}),Ze=e=>t.jsx(k,{paddingLeft:6,children:t.jsx("ul",{children:e})}),Je=h.li`
  list-style: disc;
  &::marker {
    color: ${({theme:e})=>e.colors.neutral800};
  }
`,et=e=>t.jsx(Je,{children:e}),tt=h(g)`
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
`,st=e=>t.jsx(tt,{alignItems:"normal",tag:"nav",background:"neutral0",direction:"column",height:"100vh",position:"sticky",top:0,zIndex:2,width:10,...e}),nt=h(g)`
  svg,
  img {
    border-radius: ${({theme:e})=>e.borderRadius};
    object-fit: contain;
    height: 2.4rem;
    width: 2.4rem;
  }
`,it=()=>{const{formatMessage:e}=L(),{logos:{menu:s}}=z("LeftMenu");return t.jsx(k,{padding:3,children:t.jsxs(nt,{direction:"column",justifyContent:"center",width:"3.2rem",height:"3.2rem",children:[t.jsx("img",{src:s.custom?.url||s.default,alt:e({id:"app.components.LeftMenu.logo.alt",defaultMessage:"Application logo"}),width:"100%",height:"100%"}),t.jsxs(W,{children:[t.jsx("span",{children:e({id:"app.components.LeftMenu.navbrand.title",defaultMessage:"Strapi Dashboard"})}),t.jsx("span",{children:e({id:"app.components.LeftMenu.navbrand.workplace",defaultMessage:"Workplace"})})]})]})})},rt=h(D)`
  text-decoration: none;
  display: flex;
  border-radius: ${({theme:e})=>e.borderRadius};
  background: ${({theme:e})=>e.colors.neutral0};
  color: ${({theme:e})=>e.colors.neutral500};
  position: relative;
  width: fit-content;
  padding-block: 0.6rem;
  padding-inline: 0.6rem;

  &:hover {
    svg path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
    background: ${({theme:e})=>e.colors.neutral100};
  }

  &.active {
    svg path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
    background: ${({theme:e})=>e.colors.primary100};
  }
`,ot=({children:e,...s})=>t.jsx(rt,{...s,children:e}),at=({children:e,label:s,position:n="right"})=>t.jsx(ae,{side:n,label:s,delayDuration:0,children:t.jsx("span",{children:e})}),ct=({label:e,children:s})=>s?t.jsx(ce,{label:e,children:s}):null,dt=h(H)`
  /* override default badge styles to change the border radius of the Base element in the Design System */
  border-radius: ${({theme:e})=>e.spaces[10]};
  height: 2rem;
`,lt=({children:e,label:s,...n})=>e?t.jsx(dt,{position:"absolute",top:"-0.8rem",left:"1.7rem","aria-label":s,active:!1,...n,children:e}):null,T={Link:ot,Tooltip:at,Icon:ct,Badge:lt},ut=h(C.Trigger)`
  height: ${({theme:e})=>e.spaces[7]};
  width: ${({theme:e})=>e.spaces[7]};
  border: none;
  border-radius: 50%;
  // Removes inherited 16px padding
  padding: 0;
  // Prevent empty pixel from appearing below the main nav
  overflow: hidden;
`,pt=h(C.Content)`
  left: ${({theme:e})=>e.spaces[3]};
`,F=h(C.Item)`
  & > span {
    width: 100%;
    display: flex;
    align-items: center;
    gap: ${({theme:e})=>e.spaces[3]};
    justify-content: space-between;
  }
`,gt=h(F)`
  &:hover {
    ${({theme:e})=>`
    background: ${e.colors.danger100};
  `}
  }
`,mt=({children:e,initials:s,...n})=>{const{formatMessage:c}=L(),o=je(),l=w("Logout",u=>u.logout),r=()=>{o("/me")},i=()=>{l(),o("/auth/login")};return t.jsx(g,{justifyContent:"center",padding:3,borderStyle:"solid",borderWidth:"1px 0 0 0",borderColor:"neutral150",...n,children:t.jsxs(C.Root,{children:[t.jsxs(ut,{endIcon:null,fullWidth:!0,justifyContent:"center",children:[t.jsx(ye.Item,{delayMs:0,fallback:s}),t.jsx(W,{tag:"span",children:e})]}),t.jsxs(pt,{popoverPlacement:"top-center",zIndex:3,children:[t.jsx(F,{onSelect:r,children:c({id:"global.profile",defaultMessage:"Profile"})}),t.jsxs(gt,{onSelect:i,color:"danger600",children:[c({id:"app.components.LeftMenu.logout",defaultMessage:"Logout"}),t.jsx(be,{})]})]})]})})},ht=e=>e.sort((s,n)=>{const c=s.position??6,o=n.position??6;return c<o?-1:1}),ft=h(T.Badge)`
  span {
    color: ${({theme:e})=>e.colors.neutral0};
  }
`,xt=h(T.Badge)`
  background-color: transparent;
`,jt=h(g)`
  overflow-y: auto;
`,yt=({generalSectionLinks:e,pluginsSectionLinks:s})=>{const n=w("AuthenticatedApp",d=>d.user),{trackUsage:c}=E(),{pathname:o}=de(),l=Ie(n),{formatMessage:r,locale:i}=L(),u=le(i,{sensitivity:"base"}),a=l.split(" ").map(d=>d.substring(0,1)).join("").substring(0,2),m=d=>{c("willNavigate",{from:o,to:d})},b=[...s,...e].sort((d,j)=>u.compare(r(d.intlLabel),r(j.intlLabel))),S=ht(b);return t.jsxs(st,{children:[t.jsx(it,{}),t.jsx(ue,{}),t.jsx(jt,{tag:"ul",gap:3,direction:"column",flex:1,paddingTop:3,paddingBottom:3,children:S.length>0?S.map(d=>{const j=d.icon,p=d?.licenseOnly?t.jsx(pe,{fill:"warning500"}):void 0,f=d.notificationsCount&&d.notificationsCount>0?d.notificationsCount.toString():void 0,y=r(d.intlLabel);return t.jsx(g,{tag:"li",children:t.jsx(T.Tooltip,{label:y,children:t.jsxs(T.Link,{to:d.to,onClick:()=>m(d.to),"aria-label":y,children:[t.jsx(T.Icon,{label:y,children:t.jsx(j,{width:"20",height:"20",fill:"neutral500"})}),p?t.jsx(xt,{label:"locked",textColor:"neutral500",paddingLeft:0,paddingRight:0,children:p}):f?t.jsx(ft,{label:f,backgroundColor:"primary600",width:"2.3rem",color:"neutral0",children:f}):null]})})},d.to)}):null}),t.jsx(mt,{initials:a,children:l})]})},bt=({children:e})=>{const s=U("PluginsInitializer",r=>r.plugins),[{plugins:n},c]=x.useReducer(kt,V,()=>Lt(s)),o=x.useRef(r=>{c({type:"SET_PLUGIN_READY",pluginId:r})});if(Object.keys(n).some(r=>n[r].isReady===!1)){const r=Object.keys(n).reduce((i,u)=>{const a=n[u].initializer;if(a){const m=n[u].pluginId;i.push(t.jsx(a,{setPlugin:o.current},m))}return i},[]);return t.jsxs(t.Fragment,{children:[r,t.jsx(O.Loading,{})]})}return e},V={plugins:{}},kt=(e=V,s)=>ge(e,n=>{switch(s.type){case"SET_PLUGIN_READY":{n.plugins[s.pluginId].isReady=!0;break}default:return n}}),Lt=e=>({plugins:e}),St=e=>{const s=w("useMenu",i=>i.checkUserHasPermissions),n=U("useMenu",i=>i.menu),c=me(i=>i.admin_app.permissions),[o,l]=x.useState({generalSectionLinks:[{icon:he,intlLabel:{id:"global.home",defaultMessage:"Home"},to:"/",permissions:[],position:0},{icon:fe,intlLabel:{id:"global.marketplace",defaultMessage:"Marketplace"},to:"/marketplace",permissions:c.marketplace?.main??[],position:7},{icon:xe,intlLabel:{id:"global.settings",defaultMessage:"Settings"},to:"/settings",permissions:[],notificationsCount:0,position:9}],pluginsSectionLinks:[],isLoading:!0}),r=x.useRef(o.generalSectionLinks);return x.useEffect(()=>{async function i(){const u=await It(n,s),a=await vt(r.current,e,s);l(m=>({...m,generalSectionLinks:a,pluginsSectionLinks:u,isLoading:!1}))}i()},[l,r,n,c,e,s]),o},vt=async(e,s=!1,n)=>{const c=await Promise.all(e.map(({permissions:i})=>n(i))),o=e.filter((i,u)=>c[u].length>0),l=o.findIndex(i=>i.to==="/settings");if(l===-1)return[];const r=ke(o);return r[l].notificationsCount=s?1:0,r},It=async(e,s)=>{const n=await Promise.all(e.map(({permissions:o})=>s(o)));return e.filter((o,l)=>n[l].length>0)},{version:N}=We,Tt=()=>{const e=_("AdminLayout",p=>p.setGuidedTourVisibility),{formatMessage:s}=L(),n=w("AuthenticatedApp",p=>p.user),[c,o]=x.useState(),{showReleaseNotification:l}=z("AuthenticatedApp"),{data:r,isLoading:i}=Q(),[u,a]=x.useState(N);x.useEffect(()=>{l&&fetch("https://api.github.com/repos/strapi/strapi/releases/latest").then(async p=>{if(!p.ok)return;const f=await p.json();if(!f.tag_name)throw new Error;a(f.tag_name)}).catch(()=>{})},[l]);const m=w("AuthenticatedApp",p=>p.user?.roles);x.useEffect(()=>{m&&m.find(({code:f})=>f==="strapi-super-admin")&&r?.autoReload&&e(!0)},[m,r?.autoReload,e]),x.useEffect(()=>{ve(n).then(p=>{p&&o(p)})},[n]);const{trackUsage:b}=E(),{isLoading:S,generalSectionLinks:d,pluginsSectionLinks:j}=St(B(N,u));return we(()=>{b("didAccessAuthenticatedAdministration")}),S||i?t.jsx(O.Loading,{}):t.jsxs(Y,{...r,userId:c,latestStrapiReleaseTag:u,shouldUpdateStrapi:B(N,u),children:[t.jsx(K,{}),t.jsx(bt,{children:t.jsx(X,{backend:Z,children:t.jsxs(k,{background:"neutral100",children:[t.jsx(J,{children:s({id:"skipToContent",defaultMessage:"Skip to content"})}),t.jsxs(g,{alignItems:"flex-start",children:[t.jsx(yt,{generalSectionLinks:d,pluginsSectionLinks:j}),t.jsxs(k,{flex:1,children:[t.jsx(ee,{}),t.jsx(Fe,{})]})]})]})})})]})},Rt=()=>t.jsx(Te,{children:t.jsx(Tt,{})}),B=(e,s="")=>!P(e)||!P(s)?!1:Le(e,s);export{Tt as AdminLayout,Rt as PrivateAdminLayout};
